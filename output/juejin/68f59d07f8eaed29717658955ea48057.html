<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover"><meta name="google-site-verification" content="cCHsgG9ktuCTgWgYfqCJql8AeR4gAne4DTZqztPoirE"><meta name="apple-itunes-app" content="app-id=987739104"><meta name="baidu-site-verification" content="qiK2a1kcFc"><meta name="360-site-verification" content="4c3c7d57d59f0e1a308462fbc7fd7e51"><meta name="sogou_site_verification" content="c49WUDZczQ"><meta data-vue-meta="true" data-vmid="keywords" name="keywords" content="æºç ,åç«¯,å¾®ä¿¡,æ•°æ®åº“"><meta data-vue-meta="true" data-vmid="description" name="description" content="è‡ªæˆ‘è¡¨æ‰¬ï¼šã€ŠDubbo å®ç°åŸç†ä¸æºç è§£æ â€”â€” ç²¾å“åˆé›†ã€‹ è¡¨æ‰¬è‡ªå·±ï¼šã€ŠDæ•°æ®åº“å®ä½“è®¾è®¡åˆé›†ã€‹ æ‘˜è¦: åŸåˆ›å‡ºå¤„ http://www.iocoder.cn/RocketMQ/message-send-and-consume-orderly/ ã€ŒèŠ‹é“æºç ã€"><title data-vue-meta="true">åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ— RocketMQ æºç åˆ†æ â€”â€” Message é¡ºåºå‘é€ä¸æ¶ˆè´¹ - åç«¯ - æ˜é‡‘</title><link rel="preload" href="https://b-gold-cdn.xitu.io/v3/static/js/manifest.20254fa563d3539b68bf.js" as="script"><link rel="preload" href="https://b-gold-cdn.xitu.io/v3/static/js/vendor.e6fd81aa1499049a5bee.js" as="script"><link rel="preload" href="https://b-gold-cdn.xitu.io/v3/static/js/app.a99a1e8180beec940a3f.js" as="script"><link rel="preload" href="https://b-gold-cdn.xitu.io/v3/static/css/app.37151bbb8a40894c7953daf9b02b2ff7.css" as="style"><link rel="preload" href="https://b-gold-cdn.xitu.io/v3/static/js/3.f84ea6333e04793cc1e2.js" as="script"><link rel="apple-touch-icon" sizes="180x180" href="https://b-gold-cdn.xitu.io/favicons/v2/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon-16x16.png"><link rel="manifest" href="https://b-gold-cdn.xitu.io/favicons/v2/manifest.json"><link rel="mask-icon" href="https://b-gold-cdn.xitu.io/favicons/v2/safari-pinned-tab.svg" color="#5bbad5"><link rel="shortcut icon" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon.ico"><meta name="msapplication-config" content="https://b-gold-cdn.xitu.io/favicons/v2/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="search" title="æ˜é‡‘" href="https://b-gold-cdn.xitu.io/conf/search.xml" type="application/opensearchdescription+xml"><link rel="stylesheet" href="https://b-gold-cdn.xitu.io/ionicons/2.0.1/css/ionicons.min.css"><link rel="stylesheet" href="https://b-gold-cdn.xitu.io/asset/fw-icon/1.0.9/iconfont.css"><link href="https://b-gold-cdn.xitu.io/v3/static/css/app.37151bbb8a40894c7953daf9b02b2ff7.css" rel="stylesheet"><script async="" src="https://hm.baidu.com/hm.js?93bbd335a208870aa1f296bcd6842e5e"></script><script async="" src="//www.google-analytics.com/analytics.js"></script><script type="text/javascript" async="" src="https://assets.growingio.com/vds.js"></script><script type="text/javascript" charset="utf-8" async="" src="https://b-gold-cdn.xitu.io/v3/static/js/3.f84ea6333e04793cc1e2.js"></script></head><body><div id="juejin" data-v-6ede48a3=""><div class="global-component-box" data-v-6ede48a3=""><!----><div data-v-2840e9c3="" data-v-6ede48a3="" class="alert-list alert-list"></div><div data-v-6ddb54c6="" data-v-6ede48a3="" class="suspension-panel suspension-panel"><button data-v-6ddb54c6="" title="å›åˆ°é¡¶éƒ¨" class="btn to-top-btn" style="display: none;"><i data-v-6ddb54c6="" class="ion-android-arrow-dropup"></i></button><button data-v-6ddb54c6="" title="å»ºè®®åé¦ˆ" class="btn meiqia-btn" style=""><i data-v-6ddb54c6="" class="ion-chatbubble-working"></i></button></div><!----><!----><div class="emoji-barrage" data-v-475389e2="" data-v-6ede48a3=""><!----></div><div class="book-new-user-award-popup" style="display: none;" data-v-7c95f01f="" data-v-6ede48a3=""><div class="content-box" style="display:;" data-v-7c95f01f=""><div class="close ion-close-round" data-v-7c95f01f=""></div><div class="header" data-v-7c95f01f=""><div class="icon" data-v-7c95f01f=""><img src="https://b-gold-cdn.xitu.io/v3/static/img/icon.a87e5ae.svg" data-v-7c95f01f=""></div><div class="txt" data-v-7c95f01f="">æ–°äººä¸“äº«å¥½ç¤¼</div></div><div class="desc" data-v-7c95f01f="">å‡¡æœªè´­ä¹°è¿‡å°å†Œçš„ç”¨æˆ·ï¼Œå‡å¯é¢†å–ä¸‰å¼  5 æŠ˜æ–°äººä¸“äº«åˆ¸ï¼Œè´­ä¹°å°å†Œæ—¶è‡ªåŠ¨ä½¿ç”¨ä¸“äº«åˆ¸ï¼Œæœ€é«˜å¯èŠ‚çœ 45 å…ƒã€‚</div><div class="tickets" data-v-7c95f01f=""><div class="ticket" data-v-7c95f01f=""><div class="ticket__inner" data-v-7c95f01f=""><div class="enjoy" data-v-7c95f01f=""><span class="new-title" data-v-7c95f01f="">å°å†Œæ–°äºº 5 æŠ˜åˆ¸</span></div><div class="sale" data-v-7c95f01f="">æœ€é«˜å¯çœ 15 å…ƒ</div></div></div><div class="ticket" data-v-7c95f01f=""><div class="ticket__inner" data-v-7c95f01f=""><div class="enjoy" data-v-7c95f01f=""><span class="new-title" data-v-7c95f01f="">å°å†Œæ–°äºº 5 æŠ˜åˆ¸</span></div><div class="sale" data-v-7c95f01f="">æœ€é«˜å¯çœ 15 å…ƒ</div></div></div><div class="ticket" data-v-7c95f01f=""><div class="ticket__inner" data-v-7c95f01f=""><div class="enjoy" data-v-7c95f01f=""><span class="new-title" data-v-7c95f01f="">å°å†Œæ–°äºº 5 æŠ˜åˆ¸</span></div><div class="sale" data-v-7c95f01f="">æœ€é«˜å¯çœ 15 å…ƒ</div></div></div></div><div class="remark" data-v-7c95f01f="">æ³¨ï¼šä¸“äº«åˆ¸çš„ä½¿ç”¨æœŸé™åœ¨é¢†åˆ¸çš„ä¸ƒå¤©å†…ã€‚</div><div class="submit-btn" data-v-7c95f01f="">ä¸€é”®é¢†å–</div></div><div class="model success" style="display: none;" data-v-7c95f01f=""><div class="heading" data-v-7c95f01f="">é¢†å–æˆåŠŸ</div><div class="content-text" data-v-7c95f01f="">è´­ä¹°å°å†Œæ—¶è‡ªåŠ¨ä½¿ç”¨ä¸“äº«åˆ¸</div><div class="btn-success-footer" data-v-7c95f01f=""><div class="btn-ok" data-v-7c95f01f="">çŸ¥é“äº†</div><div class="btn-ok btn-link" data-v-7c95f01f="">å‰å¾€å°å†Œé¦–é¡µ</div></div></div><div class="model fail" style="display: none;" data-v-7c95f01f=""><div class="heading" data-v-7c95f01f="">é¢†å–å¤±è´¥</div><div class="content-text" data-v-7c95f01f="">æœ¬æ´»åŠ¨ä»…é€‚ç”¨äºå°å†Œæ–°ç”¨æˆ·</div><div class="btn-ok" data-v-7c95f01f="">çŸ¥é“äº†</div></div></div><!----></div><!----><div data-v-3f216172="" data-v-41d33d72="" data-v-6ede48a3="" class="view-container"><div data-v-3f216172="" class="main-header-box"><header data-v-5ce25e66="" data-v-3f216172="" class="main-header main-header unauthorized visible"><div data-v-5ce25e66="" class="container"><a data-v-5ce25e66="" href="/" class="logo"><img data-v-5ce25e66="" src="https://b-gold-cdn.xitu.io/v3/static/img/logo.a7995ad.svg" alt="æ˜é‡‘" class="logo-img"></a><nav data-v-5ce25e66="" role="navigation" class="main-nav"><ul data-v-5ce25e66="" class="nav-list"><li data-v-5ce25e66="" class="main-nav-list"><div data-v-5ce25e66="" class="phone-show-menu"><span data-v-5ce25e66="">é¦–é¡µ</span><div data-v-5ce25e66="" class="icon ion-arrow-down-b"></div></div><ul data-v-5ce25e66="" class="phone-hide"><li data-v-5ce25e66="" class="nav-item link-item route-active"><a data-v-5ce25e66="" href="/">é¦–é¡µ</a></li><li data-v-5ce25e66="" class="nav-item link-item pin"><a data-v-5ce25e66="" href="/pins">æ²¸ç‚¹</a><!----></li><li data-v-5ce25e66="" class="nav-item link-item book"><a data-v-5ce25e66="" href="/books">å°å†Œ</a></li><li data-v-5ce25e66="" class="nav-item link-item"><a data-v-5ce25e66="" href="/repos">å¼€æºåº“</a></li><li data-v-5ce25e66="" class="nav-item link-item"><a data-v-5ce25e66="" href="/events/all">æ´»åŠ¨</a></li><li data-v-5ce25e66="" class="nav-item link-item conf"><a data-v-5ce25e66="" st:name="confGif" title="æ˜é‡‘å¼€å‘è€…å¤§ä¼š Â· å¾®ä¿¡å°ç¨‹åºä¸“åœº" target="_blank" href="https://conf.juejin.im/2018/mini-programs"><img data-v-5ce25e66="" src="https://b-gold-cdn.xitu.io/v3/static/img/conf.78960f5.gif" alt="æ˜é‡‘å¼€å‘è€…å¤§ä¼š Â· å¾®ä¿¡å°ç¨‹åºä¸“åœº" class="conf-icon"></a></li></ul></li><li data-v-5ce25e66="" class="nav-item search"><form data-v-5ce25e66="" role="search" class="search-form"><input data-v-5ce25e66="" maxlength="32" placeholder="æœç´¢æ˜é‡‘" class="search-input"><img data-v-5ce25e66="" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogc2tldGNodG9vbCA0MS4yICgzNTM5NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Qjk3RUIxMEEtOEYzNC00QUI1LUFCQUYtNDFEOTMzNzQxRUQwPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBza2V0Y2h0b29sLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSLpppbpobUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLlr7zoiKrmoI/mkJzntKLmoYYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05OTAuMDAwMDAwLCAtMTkuMDAwMDAwKSIgZmlsbD0iI0MzQ0NENSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTkwLjAwMDAwMCwgMTkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuOTg2MTI2LDE0LjQwMDMzOTUgTDE2LjI5Mjg5MzIsMTcuNzA3MTA2OCBDMTYuNjgzNDE3NSwxOC4wOTc2MzExIDE3LjMxNjU4MjUsMTguMDk3NjMxMSAxNy43MDcxMDY4LDE3LjcwNzEwNjggQzE4LjA5NzYzMTEsMTcuMzE2NTgyNSAxOC4wOTc2MzExLDE2LjY4MzQxNzUgMTcuNzA3MTA2OCwxNi4yOTI4OTMyIEwxNC40MDAzMzk1LDEyLjk4NjEyNiBDMTUuOTYwMzg4MSwxMC43NTczMjk4IDE1Ljc0NTI0MDIsNy42NjQwMTk4MyAxMy43NTQ4OTU5LDUuNjczNjc1NTQgQzExLjUyMzMyODUsMy40NDIxMDgxNSA3LjkwNTI0MjkyLDMuNDQyMTA4MTUgNS42NzM2NzU1NCw1LjY3MzY3NTU0IEMzLjQ0MjEwODE1LDcuOTA1MjQyOTIgMy40NDIxMDgxNSwxMS41MjMzMjg1IDUuNjczNjc1NTQsMTMuNzU0ODk1OSBDNy42NjQwMTk4MywxNS43NDUyNDAyIDEwLjc1NzMyOTgsMTUuOTYwMzg4MSAxMi45ODYxMjYsMTQuNDAwMzM5NSBaIE03LjA4Nzg4OTEsMTIuMzQwNjgyMyBDNS42MzczNzAzLDEwLjg5MDE2MzUgNS42MzczNzAzLDguNTM4NDA3OSA3LjA4Nzg4OTEsNy4wODc4ODkxIEM4LjUzODQwNzksNS42MzczNzAzIDEwLjg5MDE2MzUsNS42MzczNzAzIDEyLjM0MDY4MjMsNy4wODc4ODkxIEMxMy43OTEyMDExLDguNTM4NDA3OSAxMy43OTEyMDExLDEwLjg5MDE2MzUgMTIuMzQwNjgyMywxMi4zNDA2ODIzIEMxMC44OTAxNjM1LDEzLjc5MTIwMTEgOC41Mzg0MDc5LDEzLjc5MTIwMTEgNy4wODc4ODkxLDEyLjM0MDY4MjMgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==" alt="æœç´¢" class="search-icon"></form></li><!----><!----><!----><li data-v-5ce25e66="" class="nav-item submit"><img data-v-5ce25e66="" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogc2tldGNodG9vbCA0MiAoMzY3ODEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPjA1Q0I0NzU5LUIyRkQtNDcxOC04RTBDLTg0OEVCNzQ2RDAyMzwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggc2tldGNodG9vbC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xIiB4PSIyMzgiIHk9IjEyOCIgd2lkdGg9IjcwMCIgaGVpZ2h0PSI1MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4wNTAyNzE3MzkxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8cmVjdCBpZD0icGF0aC0zIiB4PSI0IiB5PSI0IiB3aWR0aD0iMTMiIGhlaWdodD0iMTQiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stNCIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9IjAiIHk9IjAiIHdpZHRoPSIxMyIgaGVpZ2h0PSIxNCIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTMiPjwvdXNlPgogICAgICAgIDwvbWFzaz4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSLpppbpobUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLpppbpobUyX0NvX+aZrumAmueUqOaItyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwNS4wMDAwMDAsIC0xNDIuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJDb21iaW5lZC1TaGFwZSI+CiAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzA1LjAwMDAwMCwgMTQyLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0zIiB4PSIwIiB5PSIwIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05Ljg5NTY2MjY1LDkuMzQ2Mjc4MzIgTDYuNjY3NTA3MzEsOS4zNDYyNzgzMiBDNi4zNzA1MDcxNyw5LjM0NjI3ODMyIDYuMTI5NDQ5ODQsOS4xMDI3MDQ4MiA2LjEyOTQ0OTg0LDguODAyNTc4MzYgQzYuMTI5NDQ5ODQsOC41MDI0NzMxNyA2LjM3MDUwNzE3LDguMjU4ODk5NjggNi42Njc1MDczMSw4LjI1ODg5OTY4IEw5Ljg5NTY4MzcxLDguMjU4ODk5NjggQzEwLjE5MjYyMDcsOC4yNTg4OTk2OCAxMC40MzM2NTcsOC41MDI0NzMxNyAxMC40MzM2NTcsOC44MDI1NzgzNiBDMTAuNDMzNjM1OSw5LjEwMjcwNDgyIDEwLjE5MjU5OTYsOS4zNDYyNzgzMiA5Ljg5NTY2MjY1LDkuMzQ2Mjc4MzIgTTEzLjExMzIzNzEsMTIuNjA4NDE0MiBMNi42NjY2OTgyLDEyLjYwODQxNDIgQzYuMzcwMTQ0NjcsMTIuNjA4NDE0MiA2LjEyOTQ0OTg0LDEyLjM2NTQwNTcgNi4xMjk0NDk4NCwxMi4wNjQ3NTY4IEM2LjEyOTQ0OTg0LDExLjc2NDAyMjkgNi4zNzAxNDQ2NywxMS41MjEwMzU2IDYuNjY2Njk4MiwxMS41MjEwMzU2IEwxMy4xMTMyMzcxLDExLjUyMTAzNTYgQzEzLjQxMDI3NDEsMTEuNTIxMDM1NiAxMy42NTA0ODU0LDExLjc2NDAyMjkgMTMuNjUwNDg1NCwxMi4wNjQ3NTY4IEMxMy42NTA0ODU0LDEyLjM2NTM4NDQgMTMuNDEwMjc0MSwxMi42MDg0MTQyIDEzLjExMzIzNzEsMTIuNjA4NDE0MiIgaWQ9Imljb25mb250LWJpYW5qaSIgZmlsbD0iIzAwN0ZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHVzZSBpZD0iUmVjdGFuZ2xlIiBzdHJva2U9IiMwMDdGRkYiIG1hc2s9InVybCgjbWFzay00KSIgc3Ryb2tlLXdpZHRoPSIyIiB4bGluazpocmVmPSIjcGF0aC0zIj48L3VzZT4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+" class="icon"><span data-v-5ce25e66="">å†™æ–‡ç« </span><!----></li><li data-v-5ce25e66="" class="nav-item auth"><span data-v-5ce25e66="" class="login">ç™»å½•</span><span data-v-5ce25e66="" class="register">æ³¨å†Œ</span></li></ul></nav></div></header></div><main data-v-3f216172="" class="container main-container"><div data-v-41d33d72="" data-v-3f216172="" class="view entry-public-view"><div data-v-41d33d72="" data-v-3f216172="" class="entry-public-main shadow"><!----><!----><article data-v-41d33d72="" itemscope="itemscope" itemtype="http://schema.org/Article" class="entry-content-box" data-v-3f216172=""><meta itemprop="url" content="https://juejin.im/entry/5bccf701e51d457a26286d48"><meta itemprop="headline" content="åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ— RocketMQ æºç åˆ†æ â€”â€” Message é¡ºåºå‘é€ä¸æ¶ˆè´¹"><meta itemprop="keywords" content="æºç ,åç«¯,å¾®ä¿¡,æ•°æ®åº“"><meta itemprop="datePublished" content="2018-10-21T22:00:33.093Z"><meta itemprop="image" content="https://b-gold-cdn.xitu.io/icon/icon-128.png"><div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaå…¬ä¼—å·_èŠ‹é“æºç _æ¯æ—¥æ›´æ–°"><meta itemprop="url" content="https://juejin.im/user/5904c637b123db3ee479d923"></div><div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"><div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://b-gold-cdn.xitu.io/icon/icon-white-180.png"><meta itemprop="width" content="180"><meta itemprop="height" content="180"></div></div><h1 data-v-41d33d72="">åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ— RocketMQ æºç åˆ†æ â€”â€” Message é¡ºåºå‘é€ä¸æ¶ˆè´¹</h1><div data-v-41d33d72="" class="entry-public-info"><div data-v-41d33d72="" class="text-muted info-item">é˜…è¯» 1764</div><div data-v-41d33d72="" class="text-muted info-item">æ”¶è— 23</div><div data-v-41d33d72="" class="text-muted info-item">2018-10-22</div></div><div data-v-41d33d72="" class="originalUrl">åŸæ–‡é“¾æ¥ï¼š<a data-v-41d33d72="" st:name="originLink" href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%3Fjuejin%262018-10-22" rel="nofollow noopener noreferrer" target="_blank">www.iocoder.cn</a></div><a data-v-41d33d72="" class="banner" href="https://cloud.tencent.com/act/special/amd?fromSource=gwzcw.1351356.1351356.1351356" rel="nofollow noopener noreferrer" target="_blank"><span data-v-41d33d72="" class="text">AMD CPUäº‘æœåŠ¡å™¨å…¨å›½é¦–æ¨</span><span data-v-41d33d72="" class="link">cloud.tencent.com</span></a><div data-v-41d33d72="" itemprop="articleBody" class="entry-content article-content"><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FDubbo%2Fgood-collection%2F%3Ftitle" target="_blank" rel="nofollow noopener noreferrer">è‡ªæˆ‘è¡¨æ‰¬ï¼šã€ŠDubbo å®ç°åŸç†ä¸æºç è§£æ â€”â€” ç²¾å“åˆé›†ã€‹</a> <br> <a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FEntity%2Fgood-collection%2F%3Ftitle" target="_blank" rel="nofollow noopener noreferrer">è¡¨æ‰¬è‡ªå·±ï¼šã€ŠDæ•°æ®åº“å®ä½“è®¾è®¡åˆé›†ã€‹</a>
<p>æ‘˜è¦: åŸåˆ›å‡ºå¤„ <a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">www.iocoder.cn/RocketMQ/meâ€¦</a> ã€ŒèŠ‹é“æºç ã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼</p>
<p><strong>æœ¬æ–‡ä¸»è¦åŸºäº RocketMQ 4.0.x æ­£å¼ç‰ˆ</strong> </p>
<ul>
    <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">1. æ¦‚è¿°</a></li>
    <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">2. <code>Producer</code> é¡ºåºå‘é€</a></li>
    <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">3. <code>Consumer</code> ä¸¥æ ¼é¡ºåºæ¶ˆè´¹</a>
        <ul>
            <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">3.1 è·å¾—(é”å®š)æ¶ˆæ¯é˜Ÿåˆ—</a></li>
            <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">3.2 ç§»é™¤æ¶ˆæ¯é˜Ÿåˆ—</a></li>
            <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">3.3 æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—</a>
                <ul>
                    <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">3.1.1 æ¶ˆè´¹æ¶ˆæ¯</a></li>
                    <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">3.1.2 å¤„ç†æ¶ˆè´¹ç»“æœ</a></li>
                    <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-consume-orderly%2F" target="_blank" rel="nofollow noopener noreferrer">3.13 æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—æ ¸å¿ƒæ–¹æ³•</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul>
<hr>
<p><img alt="" class="lazyload inited loaded" data-src="https://user-gold-cdn.xitu.io/2018/10/18/166840b9b5db2e09?imageView2/0/w/1280/h/960/ignore-error/1" data-width="1280" data-height="536" src="https://user-gold-cdn.xitu.io/2018/10/18/166840b9b5db2e09?imageView2/0/w/1280/h/960/ignore-error/1"></p>
<blockquote>
    <p>ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨<strong>å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘</strong>æœ‰ç¦åˆ©ï¼š </p>
    <ol>
        <li>RocketMQ / MyCAT / Sharding-JDBC <strong>æ‰€æœ‰</strong>æºç åˆ†ææ–‡ç« åˆ—è¡¨ </li>
        <li>RocketMQ / MyCAT / Sharding-JDBC <strong>ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€</strong> </li>
        <li>æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€<strong>éƒ½</strong>å°†å¾—åˆ°<strong>è®¤çœŸ</strong>å›å¤ã€‚<strong>ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢</strong>ã€‚ </li>
        <li><strong>æ–°çš„</strong>æºç è§£ææ–‡ç« <strong>å®æ—¶</strong>æ”¶åˆ°é€šçŸ¥ã€‚<strong>æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³</strong>ã€‚ </li>
        <li><strong>è®¤çœŸçš„</strong>æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚</li>
    </ol>
</blockquote>
<hr>
<h1 id="1-æ¦‚è¿°" data-id="heading-0"><a href="#1-æ¦‚è¿°" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h1>
<p><strong>å»ºè®®</strong>å‰ç½®é˜…è¯»å†…å®¹ï¼š</p>
<ul>
    <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-send-and-receive%2F" target="_blank" rel="nofollow noopener noreferrer">ã€ŠRocketMQ æºç åˆ†æ â€”â€” Message å‘é€ä¸æ¥æ”¶ã€‹</a></li>
    <li><a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-pull-and-consume-second%2F" target="_blank" rel="nofollow noopener noreferrer">ã€ŠRocketMQ æºç åˆ†æ â€”â€” Message æ‹‰å–ä¸æ¶ˆè´¹ï¼ˆä¸‹ï¼‰ã€‹</a></li>
</ul>
<p>å½“ç„¶å¯¹ <code>Message</code> å‘é€ä¸æ¶ˆè´¹å·²ç»æœ‰ä¸€å®šäº†è§£çš„åŒå­¦ï¼Œå¯ä»¥é€‰æ‹©è·³è¿‡ã€‚</p>
<hr>
<p><code>RocketMQ</code> æä¾›äº†ä¸¤ç§é¡ºåºçº§åˆ«ï¼š</p>
<ul>
    <li>æ™®é€šé¡ºåºæ¶ˆæ¯ ï¼š<code>Producer</code> å°†ç›¸å…³è”çš„æ¶ˆæ¯å‘é€åˆ°ç›¸åŒçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>
    <li>å®Œå…¨ä¸¥æ ¼é¡ºåº ï¼šåœ¨ <code>æ™®é€šé¡ºåºæ¶ˆæ¯</code> çš„åŸºç¡€ä¸Šï¼Œ<code>Consumer</code> ä¸¥æ ¼é¡ºåºæ¶ˆè´¹ã€‚</li>
</ul>
<p>ç»å¤§éƒ¨åˆ†åœºæ™¯ä¸‹åªéœ€è¦ç”¨åˆ°<strong>æ™®é€šé¡ºåºæ¶ˆæ¯</strong>ã€‚<br>ä¾‹å¦‚è¯´ï¼šç»™ç”¨æˆ·å‘é€çŸ­ä¿¡æ¶ˆæ¯ + å‘é€æ¨é€æ¶ˆæ¯ï¼Œå°†ä¸¤æ¡æ¶ˆæ¯å‘é€åˆ°ä¸åŒçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè‹¥å…¶ä¸­ä¸€æ¡æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹è¾ƒæ…¢é€ æˆå µå¡ï¼Œç”¨æˆ·å¯èƒ½ä¼šæ”¶åˆ°ä¸¤æ¡æ¶ˆæ¯ä¼šå­˜åœ¨ä¸€å®šçš„æ—¶é—´å·®ï¼Œå¸¦æ¥çš„ä½“éªŒä¼šç›¸å¯¹è¾ƒå·®ã€‚å½“ç„¶ç±»ä¼¼è¿™ç§åœºæ™¯ï¼Œå³ä½¿æœ‰ä¸€å®šçš„æ—¶é—´å·®ï¼Œ<strong>ä¸ä¼šäº§ç”Ÿç³»ç»Ÿé€»è¾‘ä¸ŠBUG</strong>ã€‚å¦å¤–ï¼Œ<code>æ™®é€šé¡ºåºæ¶ˆæ¯</code>æ€§èƒ½èƒ½æ›´åŠ å¥½ã€‚<br>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä½¿ç”¨ä½¿ç”¨<strong>å®Œå…¨ä¸¥æ ¼é¡ºåº</strong>ï¼Ÿå¦‚ä¸‹æ˜¯æ¥è‡ªå®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼š</p>
<blockquote>
    <p>ç›®å‰å·²çŸ¥çš„åº”ç”¨åªæœ‰æ•°æ®åº“ <code>binlog</code> åŒæ­¥å¼ºä¾èµ–ä¸¥æ ¼é¡ºåºæ¶ˆæ¯ï¼Œå…¶ä»–åº”ç”¨ç»å¤§éƒ¨åˆ†éƒ½å¯ä»¥å®¹å¿çŸ­æš‚ä¹±åºï¼Œæ¨èä½¿ç”¨æ™®é€šçš„é¡ºåºæ¶ˆæ¯</p>
</blockquote>
<hr>
<p>ğŸ˜ˆä¸Šä»£ç ï¼ï¼ï¼</p>
<h1 id="2-Producer-é¡ºåºå‘é€" data-id="heading-1"><a href="#2-Producer-é¡ºåºå‘é€" title="2. Producer é¡ºåºå‘é€"></a>2. <code>Producer</code> é¡ºåºå‘é€</h1>
<p>å®˜æ–¹å‘é€é¡ºåºæ¶ˆæ¯çš„<strong>ä¾‹å­</strong>ï¼š</p>
<pre><code> 1: package org.apache.rocketmq.example.ordermessage;
 2: 
 3: import java.io.UnsupportedEncodingException;
 4: import java.util.List;
 5: import org.apache.rocketmq.client.exception.MQBrokerException;
 6: import org.apache.rocketmq.client.exception.MQClientException;
 7: import org.apache.rocketmq.client.producer.DefaultMQProducer;
 8: import org.apache.rocketmq.client.producer.MQProducer;
 9: import org.apache.rocketmq.client.producer.MessageQueueSelector;
10: import org.apache.rocketmq.client.producer.SendResult;
11: import org.apache.rocketmq.common.message.Message;
12: import org.apache.rocketmq.common.message.MessageQueue;
13: import org.apache.rocketmq.remoting.common.RemotingHelper;
14: import org.apache.rocketmq.remoting.exception.RemotingException;
15: 
16: public class Producer {
17:     public static void main(String[] args) throws UnsupportedEncodingException {
18:         try {
19:             MQProducer producer = new DefaultMQProducer("please_rename_unique_group_name");
20:             producer.start();
21: 
22:             String[] tags = new String[] {"TagA", "TagB", "TagC", "TagD", "TagE"};
23:             for (int i = 0; i &lt; 100; i++) {
24:                 int orderId = i % 10;
25:                 Message msg =
26:                     new Message("TopicTestjjj", tags[i % tags.length], "KEY" + i,
27:                         ("Hello RocketMQ " + i).getBytes(RemotingHelper.DEFAULT_CHARSET));
28:                 SendResult sendResult = producer.send(msg, new MessageQueueSelector() {
29:                     @Override
30:                     public MessageQueue select(List&lt;MessageQueue&gt; mqs, Message msg, Object arg) {
31:                         Integer id = (Integer) arg;
32:                         int index = id % mqs.size();
33:                         return mqs.get(index);
34:                     }
35:                 }, orderId);
36: 
37:                 System.out.printf("%s%n", sendResult);
38:             }
39: 
40:             producer.shutdown();
41:         } catch (MQClientException | RemotingException | MQBrokerException | InterruptedException e) {
42:             e.printStackTrace();
43:         }
44:     }
45: }
</code></pre>
<ul>
    <li>ç¬¬ 28 è‡³ 35 è¡Œ ï¼šå®ç°äº†æ ¹æ® <code>id % mqs.size()</code> æ¥è¿›è¡Œæ¶ˆæ¯é˜Ÿåˆ—çš„é€‰æ‹©ã€‚å½“å‰ä¾‹å­ï¼Œæˆ‘ä»¬ä¼ é€’ <code>orderId</code> ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆç›¸åŒçš„ <code>orderId</code> èƒ½å¤Ÿè¿›å…¥ç›¸åŒçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>
</ul>
<hr>
<p><code>MessageQueueSelector</code> æ¥å£çš„<strong>æºç </strong>ï¼š</p>
<pre><code> 1: public interface MessageQueueSelector {
 2: 
 3:     /**
 4:      * é€‰æ‹©æ¶ˆæ¯é˜Ÿåˆ—
 5:      *
 6:      * @param mqs æ¶ˆæ¯é˜Ÿåˆ—
 7:      * @param msg æ¶ˆæ¯
 8:      * @param arg å‚æ•°
 9:      * @return æ¶ˆæ¯é˜Ÿåˆ—
10:      */
11:     MessageQueue select(final List&lt;MessageQueue&gt; mqs, final Message msg, final Object arg);
12: }
</code></pre>
<hr>
<p><code>Producer</code> é€‰æ‹©é˜Ÿåˆ—å‘é€æ¶ˆæ¯æ–¹æ³•çš„<strong>æºç </strong>ï¼š</p>
<pre><code>16: private SendResult sendSelectImpl(//
17:     Message msg, //
18:     MessageQueueSelector selector, //
19:     Object arg, //
20:     final CommunicationMode communicationMode, //
21:     final SendCallback sendCallback, final long timeout//
22: ) throws MQClientException, RemotingException, MQBrokerException, InterruptedException {
23:     this.makeSureStateOK();
24:     Validators.checkMessage(msg, this.defaultMQProducer);
25: 
26:     TopicPublishInfo topicPublishInfo = this.tryToFindTopicPublishInfo(msg.getTopic());
27:     if (topicPublishInfo != null &amp;&amp; topicPublishInfo.ok()) {
28:         MessageQueue mq = null;
29:         try {
30:             mq = selector.select(topicPublishInfo.getMessageQueueList(), msg, arg);
31:         } catch (Throwable e) {
32:             throw new MQClientException("select message queue throwed exception.", e);
33:         }
34: 
35:         if (mq != null) {
36:             return this.sendKernelImpl(msg, mq, communicationMode, sendCallback, null, timeout);
37:         } else {
38:             throw new MQClientException("select message queue return null.", null);
39:         }
40:     }
41: 
42:     throw new MQClientException("No route info for this topic, " + msg.getTopic(), null);
43: }
</code></pre>
<ul>
    <li>ç¬¬ 30 è¡Œ ï¼šé€‰æ‹©æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>
    <li>ç¬¬ 36 è¡Œ ï¼šå‘é€æ¶ˆæ¯ã€‚</li>
</ul>
<h1 id="3-Consumer-ä¸¥æ ¼é¡ºåºæ¶ˆè´¹" data-id="heading-2"><a href="#3-Consumer-ä¸¥æ ¼é¡ºåºæ¶ˆè´¹" title="3. Consumer ä¸¥æ ¼é¡ºåºæ¶ˆè´¹"></a>3. <code>Consumer</code> ä¸¥æ ¼é¡ºåºæ¶ˆè´¹</h1>
<p><code>Consumer</code> åœ¨ä¸¥æ ¼é¡ºåºæ¶ˆè´¹æ—¶ï¼Œé€šè¿‡ <strong>ä¸‰</strong> æŠŠé”ä¿è¯ä¸¥æ ¼é¡ºåºæ¶ˆè´¹ã€‚</p>
<ul>
    <li><code>Broker</code> æ¶ˆæ¯é˜Ÿåˆ—é”ï¼ˆ<strong>åˆ†å¸ƒå¼é”</strong>ï¼‰ ï¼š
        <ul>
            <li>é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œ<code>Consumer</code> ä» <code>Broker</code> è·å¾—è¯¥é”åï¼Œæ‰èƒ½è¿›è¡Œæ¶ˆæ¯æ‹‰å–ã€æ¶ˆè´¹ã€‚</li>
            <li>å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œ<code>Consumer</code> æ— éœ€è¯¥é”ã€‚</li>
        </ul>
    </li>
    <li><code>Consumer</code> æ¶ˆæ¯é˜Ÿåˆ—é”ï¼ˆ<strong>æœ¬åœ°é”</strong>ï¼‰ ï¼š<code>Consumer</code> è·å¾—è¯¥é”æ‰èƒ½æ“ä½œæ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>
    <li><code>Consumer</code> æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—æ¶ˆè´¹é”ï¼ˆ<strong>æœ¬åœ°é”</strong>ï¼‰ ï¼š<code>Consumer</code> è·å¾—è¯¥é”æ‰èƒ½æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li>
</ul>
<p>å¯èƒ½åŒå­¦æœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆæœ‰ <code>Consumer</code> æ¶ˆæ¯é˜Ÿåˆ—é”è¿˜éœ€è¦æœ‰ <code>Consumer</code> æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹é”å‘¢ï¼ŸğŸ˜ˆè®©æˆ‘ä»¬å¸¦ç€ç–‘é—®ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p>
<hr>
<h2 id="3-1-è·å¾—-é”å®š-æ¶ˆæ¯é˜Ÿåˆ—" data-id="heading-3"><a href="#3-1-è·å¾—-é”å®š-æ¶ˆæ¯é˜Ÿåˆ—" title="3.1 è·å¾—(é”å®š)æ¶ˆæ¯é˜Ÿåˆ—"></a>3.1 è·å¾—(é”å®š)æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p><strong>é›†ç¾¤æ¨¡å¼</strong>ä¸‹ï¼Œ<code>Consumer</code> æ›´æ–°å±äºè‡ªå·±çš„æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œä¼šå‘ <code>Broker</code> é”å®šè¯¥æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆ<em>å¹¿æ’­æ¨¡å¼ä¸‹ä¸éœ€è¦</em>ï¼‰ã€‚å¦‚æœé”å®šå¤±è´¥ï¼Œåˆ™æ›´æ–°å¤±è´¥ï¼Œå³è¯¥æ¶ˆæ¯é˜Ÿåˆ—ä¸å±äºè‡ªå·±ï¼Œä¸èƒ½è¿›è¡Œæ¶ˆè´¹ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code> 1: // â¬‡ï¸â¬‡ï¸â¬‡ï¸ã€RebalanceImpl.javaã€‘
 2: private boolean updateProcessQueueTableInRebalance(final String topic, final Set&lt;MessageQueue&gt; mqSet, final boolean isOrder) {
 3: // ..... æ­¤å¤„çœç•¥éƒ¨åˆ†ä»£ç  
 4:     // å¢åŠ  ä¸åœ¨processQueueTable &amp;&amp; å­˜åœ¨äºmqSet é‡Œçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚
 5:     List&lt;PullRequest&gt; pullRequestList = new ArrayList&lt;&gt;(); // æ‹‰æ¶ˆæ¯è¯·æ±‚æ•°ç»„
 6:     for (MessageQueue mq : mqSet) {
 7:         if (!this.processQueueTable.containsKey(mq)) {
 8:             if (isOrder &amp;&amp; !this.lock(mq)) { // é¡ºåºæ¶ˆæ¯é”å®šæ¶ˆæ¯é˜Ÿåˆ—
 9:                 log.warn("doRebalance, {}, add a new mq failed, {}, because lock failed", consumerGroup, mq);
10:                 continue;
11:             }
12: 
13:             this.removeDirtyOffset(mq);
14:             ProcessQueue pq = new ProcessQueue();
15:             long nextOffset = this.computePullFromWhere(mq);
16:             if (nextOffset &gt;= 0) {
17:                 ProcessQueue pre = this.processQueueTable.putIfAbsent(mq, pq);
18:                 if (pre != null) {
19:                     log.info("doRebalance, {}, mq already exists, {}", consumerGroup, mq);
20:                 } else {
21:                     log.info("doRebalance, {}, add a new mq, {}", consumerGroup, mq);
22:                     PullRequest pullRequest = new PullRequest();
23:                     pullRequest.setConsumerGroup(consumerGroup);
24:                     pullRequest.setNextOffset(nextOffset);
25:                     pullRequest.setMessageQueue(mq);
26:                     pullRequest.setProcessQueue(pq);
27:                     pullRequestList.add(pullRequest);
28:                     changed = true;
29:                 }
30:             } else {
31:                 log.warn("doRebalance, {}, add new mq failed, {}", consumerGroup, mq);
32:             }
33:         }
34:     }
35: 
36: // ..... æ­¤å¤„çœç•¥éƒ¨åˆ†ä»£ç  
37: }
38: 
39: // â¬‡ï¸â¬‡ï¸â¬‡ï¸ã€RebalanceImpl.javaã€‘
40: /**
41:  * è¯·æ±‚Brokerè·å¾—æŒ‡å®šæ¶ˆæ¯é˜Ÿåˆ—çš„åˆ†å¸ƒå¼é”
42:  *
43:  * @param mq é˜Ÿåˆ—
44:  * @return æ˜¯å¦æˆåŠŸ
45:  */
46: public boolean lock(final MessageQueue mq) {
47:     FindBrokerResult findBrokerResult = this.mQClientFactory.findBrokerAddressInSubscribe(mq.getBrokerName(), MixAll.MASTER_ID, true);
48:     if (findBrokerResult != null) {
49:         LockBatchRequestBody requestBody = new LockBatchRequestBody();
50:         requestBody.setConsumerGroup(this.consumerGroup);
51:         requestBody.setClientId(this.mQClientFactory.getClientId());
52:         requestBody.getMqSet().add(mq);
53: 
54:         try {
55:             // è¯·æ±‚Brokerè·å¾—æŒ‡å®šæ¶ˆæ¯é˜Ÿåˆ—çš„åˆ†å¸ƒå¼é”
56:             Set&lt;MessageQueue&gt; lockedMq =
57:                 this.mQClientFactory.getMQClientAPIImpl().lockBatchMQ(findBrokerResult.getBrokerAddr(), requestBody, 1000);
58: 
59:             // è®¾ç½®æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—é”å®šæˆåŠŸã€‚é”å®šæ¶ˆæ¯é˜Ÿåˆ—æˆåŠŸï¼Œå¯èƒ½æœ¬åœ°æ²¡æœ‰æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—ï¼Œè®¾ç½®é”å®šæˆåŠŸä¼šåœ¨lockAll()æ–¹æ³•ã€‚
60:             for (MessageQueue mmqq : lockedMq) {
61:                 ProcessQueue processQueue = this.processQueueTable.get(mmqq);
62:                 if (processQueue != null) {
63:                     processQueue.setLocked(true);
64:                     processQueue.setLastLockTimestamp(System.currentTimeMillis());
65:                 }
66:             }
67: 
68:             boolean lockOK = lockedMq.contains(mq);
69:             log.info("the message queue lock {}, {} {}",
70:                 lockOK ? "OK" : "Failed",
71:                 this.consumerGroup,
72:                 mq);
73:             return lockOK;
74:         } catch (Exception e) {
75:             log.error("lockBatchMQ exception, " + mq, e);
76:         }
77:     }
78: 
79:     return false;
80: }
</code></pre>
<ul>
    <li>â¬†ï¸â¬†ï¸â¬†ï¸</li>
    <li>ç¬¬ 8 è‡³ 11 è¡Œ ï¼šé¡ºåºæ¶ˆè´¹æ—¶ï¼Œé”å®šæ¶ˆæ¯é˜Ÿåˆ—ã€‚å¦‚æœé”å®šå¤±è´¥ï¼Œæ–°å¢æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—å¤±è´¥ã€‚</li>
</ul>
<hr>
<p><code>Broker</code> æ¶ˆæ¯é˜Ÿåˆ—é”ä¼šè¿‡æœŸï¼Œé»˜è®¤é…ç½® 30sã€‚å› æ­¤ï¼Œ<code>Consumer</code> éœ€è¦ä¸æ–­å‘ <code>Broker</code> åˆ·æ–°è¯¥é”è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤é…ç½® 20s åˆ·æ–°ä¸€æ¬¡ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code> 1: // â¬‡ï¸â¬‡ï¸â¬‡ï¸ã€ConsumeMessageOrderlyService.javaã€‘
 2: public void start() {
 3:     if (MessageModel.CLUSTERING.equals(ConsumeMessageOrderlyService.this.defaultMQPushConsumerImpl.messageModel())) {
 4:         this.scheduledExecutorService.scheduleAtFixedRate(new Runnable() {
 5:             @Override
 6:             public void run() {
 7:                 ConsumeMessageOrderlyService.this.lockMQPeriodically();
 8:             }
 9:         }, 1000 * 1, ProcessQueue.REBALANCE_LOCK_INTERVAL, TimeUnit.MILLISECONDS);
10:     }
11: }
</code></pre>
<h2 id="3-2-ç§»é™¤æ¶ˆæ¯é˜Ÿåˆ—" data-id="heading-4"><a href="#3-2-ç§»é™¤æ¶ˆæ¯é˜Ÿåˆ—" title="3.2 ç§»é™¤æ¶ˆæ¯é˜Ÿåˆ—"></a>3.2 ç§»é™¤æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œ<code>Consumer</code> ç§»é™¤è‡ªå·±çš„æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œä¼šå‘ <code>Broker</code> è§£é”è¯¥æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¹¿æ’­æ¨¡å¼ä¸‹ä¸éœ€è¦ï¼‰ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code> 1: // â¬‡ï¸â¬‡ï¸â¬‡ï¸ã€RebalancePushImpl.javaã€‘
 2: /**
 3:  * ç§»é™¤ä¸éœ€è¦çš„é˜Ÿåˆ—ç›¸å…³çš„ä¿¡æ¯
 4:  * 1. æŒä¹…åŒ–æ¶ˆè´¹è¿›åº¦ï¼Œå¹¶ç§»é™¤ä¹‹
 5:  * 2. é¡ºåºæ¶ˆè´¹&amp;é›†ç¾¤æ¨¡å¼ï¼Œè§£é”å¯¹è¯¥é˜Ÿåˆ—çš„é”å®š
 6:  *
 7:  * @param mq æ¶ˆæ¯é˜Ÿåˆ—
 8:  * @param pq æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—
 9:  * @return æ˜¯å¦ç§»é™¤æˆåŠŸ
10:  */
11: @Override
12: public boolean removeUnnecessaryMessageQueue(MessageQueue mq, ProcessQueue pq) {
13:     // åŒæ­¥é˜Ÿåˆ—çš„æ¶ˆè´¹è¿›åº¦ï¼Œå¹¶ç§»é™¤ä¹‹ã€‚
14:     this.defaultMQPushConsumerImpl.getOffsetStore().persist(mq);
15:     this.defaultMQPushConsumerImpl.getOffsetStore().removeOffset(mq);
16:     // é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œé¡ºåºæ¶ˆè´¹ç§»é™¤æ—¶ï¼Œè§£é”å¯¹é˜Ÿåˆ—çš„é”å®š
17:     if (this.defaultMQPushConsumerImpl.isConsumeOrderly()
18:         &amp;&amp; MessageModel.CLUSTERING.equals(this.defaultMQPushConsumerImpl.messageModel())) {
19:         try {
20:             if (pq.getLockConsume().tryLock(1000, TimeUnit.MILLISECONDS)) {
21:                 try {
22:                     return this.unlockDelay(mq, pq);
23:                 } finally {
24:                     pq.getLockConsume().unlock();
25:                 }
26:             } else {
27:                 log.warn("[WRONG]mq is consuming, so can not unlock it, {}. maybe hanged for a while, {}", //
28:                     mq, //
29:                     pq.getTryUnlockTimes());
30: 
31:                 pq.incTryUnlockTimes();
32:             }
33:         } catch (Exception e) {
34:             log.error("removeUnnecessaryMessageQueue Exception", e);
35:         }
36: 
37:         return false;
38:     }
39:     return true;
40: }
41: 
42: // â¬‡ï¸â¬‡ï¸â¬‡ï¸ã€RebalancePushImpl.javaã€‘
43: /**
44:  * å»¶è¿Ÿè§£é” Broker æ¶ˆæ¯é˜Ÿåˆ—é”
45:  * å½“æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—ä¸å­˜åœ¨æ¶ˆæ¯ï¼Œåˆ™ç›´æ¥è§£é”
46:  *
47:  * @param mq æ¶ˆæ¯é˜Ÿåˆ—
48:  * @param pq æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—
49:  * @return æ˜¯å¦è§£é”æˆåŠŸ
50:  */
51: private boolean unlockDelay(final MessageQueue mq, final ProcessQueue pq) {
52:     if (pq.hasTempMessage()) { // TODO ç–‘é—®ï¼šä¸ºä»€ä¹ˆè¦å»¶è¿Ÿç§»é™¤
53:         log.info("[{}]unlockDelay, begin {} ", mq.hashCode(), mq);
54:         this.defaultMQPushConsumerImpl.getmQClientFactory().getScheduledExecutorService().schedule(new Runnable() {
55:             @Override
56:             public void run() {
57:                 log.info("[{}]unlockDelay, execute at once {}", mq.hashCode(), mq);
58:                 RebalancePushImpl.this.unlock(mq, true);
59:             }
60:         }, UNLOCK_DELAY_TIME_MILLS, TimeUnit.MILLISECONDS);
61:     } else {
62:         this.unlock(mq, true);
63:     }
64:     return true;
65: }
</code></pre>
<ul>
    <li>â¬†ï¸â¬†ï¸â¬†ï¸</li>
    <li>ç¬¬ 20 è‡³ 32 è¡Œ ï¼šè·å–<strong>æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹é”</strong>ï¼Œé¿å…å’Œæ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹å†²çªã€‚å¦‚æœè·å–é”å¤±è´¥ï¼Œåˆ™ç§»é™¤æ¶ˆæ¯é˜Ÿåˆ—å¤±è´¥ï¼Œç­‰å¾…ä¸‹æ¬¡é‡æ–°åˆ†é…æ¶ˆè´¹é˜Ÿåˆ—æ—¶ï¼Œå†è¿›è¡Œç§»é™¤ã€‚å¦‚æœæœªè·å¾—é”è€Œè¿›è¡Œç§»é™¤ï¼Œåˆ™å¯èƒ½å‡ºç°å¦å¤–çš„ <code>Consumer</code> å’Œå½“å‰ <code>Consumer</code> åŒæ—¶æ¶ˆè´¹è¯¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯¼è‡´æ¶ˆæ¯æ— æ³•ä¸¥æ ¼é¡ºåºæ¶ˆè´¹ã€‚</li>
    <li>ç¬¬ 51 è‡³ 64 è¡Œ ï¼šè§£é” <code>Broker</code> æ¶ˆæ¯é˜Ÿåˆ—é”ã€‚å¦‚æœæ¶ˆæ¯å¤„ç†é˜Ÿåˆ—å­˜åœ¨å‰©ä½™æ¶ˆæ¯ï¼Œåˆ™å»¶è¿Ÿè§£é” <code>Broker</code> æ¶ˆæ¯é˜Ÿåˆ—é”ã€‚â“ä¸ºä»€ä¹ˆæ¶ˆæ¯å¤„ç†é˜Ÿåˆ—å­˜åœ¨å‰©ä½™æ¶ˆæ¯ä¸èƒ½ç›´æ¥è§£é”å‘¢ï¼ŸğŸ˜ˆæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œç™¾æ€ä¸å¾—å…¶è§£ã€‚å¦‚æœæœ‰çŸ¥é“çš„åŒå­¦éº»çƒ¦æ•™è‚²ä¸‹ä¿ºã€‚</li>
</ul>
<h2 id="3-3-æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—" data-id="heading-5"><a href="#3-3-æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—" title="3.3 æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—"></a>3.3 æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>ğŸ˜æœ¬èŠ‚ä¼šç±»æ¯”<strong>å¹¶å‘æ¶ˆè´¹æ¶ˆè´¹é˜Ÿåˆ—</strong>ï¼Œå»ºè®®å¯¹ç…§ <a href="https://link.juejin.im?target=http%3A%2F%2Fwww.iocoder.cn%2FRocketMQ%2Fmessage-pull-and-consume-second%2F%236%E3%80%81PushConsumer-%E6%B6%88%E8%B4%B9%E6%B6%88%E6%81%AF" target="_blank" rel="nofollow noopener noreferrer">PushConsumerå¹¶å‘æ¶ˆè´¹æ¶ˆæ¯</a> ä¸€èµ·ç†è§£ã€‚</p>
<h3 id="3-1-1-æ¶ˆè´¹æ¶ˆæ¯" data-id="heading-6"><a href="#3-1-1-æ¶ˆè´¹æ¶ˆæ¯" title="3.1.1 æ¶ˆè´¹æ¶ˆæ¯"></a>3.1.1 æ¶ˆè´¹æ¶ˆæ¯</h3>
<p><img alt="é¡ºåºæ¶ˆè´¹æ´»åŠ¨å›¾-æ¶ˆè´¹æ¶ˆæ¯" class="lazyload inited" data-src="https://user-gold-cdn.xitu.io/2018/10/22/16698a51011c8359?imageView2/0/w/1280/h/960/ignore-error/1" data-width="1280" data-height="1001" src="data:image/svg+xml;utf8,&lt;?xml version=&quot;1.0&quot;?&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;1280&quot; height=&quot;1001&quot;&gt;&lt;/svg&gt;"></p>
<pre><code>  1: // â¬‡ï¸â¬‡ï¸â¬‡ï¸ã€ConsumeMessageOrderlyService.javaã€‘
  2: class ConsumeRequest implements Runnable {
  3: 
  4:     /**
  5:      * æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—
  6:      */
  7:     private final ProcessQueue processQueue;
  8:     /**
  9:      * æ¶ˆæ¯é˜Ÿåˆ—
 10:      */
 11:     private final MessageQueue messageQueue;
 12: 
 13:     @Override
 14:     public void run() {
 15:         if (this.processQueue.isDropped()) {
 16:             log.warn("run, the message queue not be able to consume, because it's dropped. {}", this.messageQueue);
 17:             return;
 18:         }
 19: 
 20:         // è·å¾— Consumer æ¶ˆæ¯é˜Ÿåˆ—é”
 21:         final Object objLock = messageQueueLock.fetchLockObject(this.messageQueue);
 22:         synchronized (objLock) {
 23:             // (å¹¿æ’­æ¨¡å¼) æˆ–è€… (é›†ç¾¤æ¨¡å¼ &amp;&amp; Brokeræ¶ˆæ¯é˜Ÿåˆ—é”æœ‰æ•ˆ)
 24:             if (MessageModel.BROADCASTING.equals(ConsumeMessageOrderlyService.this.defaultMQPushConsumerImpl.messageModel())
 25:                 || (this.processQueue.isLocked() &amp;&amp; !this.processQueue.isLockExpired())) {
 26:                 final long beginTime = System.currentTimeMillis();
 27:                 // å¾ªç¯
 28:                 for (boolean continueConsume = true; continueConsume; ) {
 29:                     if (this.processQueue.isDropped()) {
 30:                         log.warn("the message queue not be able to consume, because it's dropped. {}", this.messageQueue);
 31:                         break;
 32:                     }
 33: 
 34:                     // æ¶ˆæ¯é˜Ÿåˆ—åˆ†å¸ƒå¼é”æœªé”å®šï¼Œæäº¤å»¶è¿Ÿè·å¾—é”å¹¶æ¶ˆè´¹è¯·æ±‚
 35:                     if (MessageModel.CLUSTERING.equals(ConsumeMessageOrderlyService.this.defaultMQPushConsumerImpl.messageModel())
 36:                         &amp;&amp; !this.processQueue.isLocked()) {
 37:                         log.warn("the message queue not locked, so consume later, {}", this.messageQueue);
 38:                         ConsumeMessageOrderlyService.this.tryLockLaterAndReconsume(this.messageQueue, this.processQueue, 10);
 39:                         break;
 40:                     }
 41:                     // æ¶ˆæ¯é˜Ÿåˆ—åˆ†å¸ƒå¼é”å·²ç»è¿‡æœŸï¼Œæäº¤å»¶è¿Ÿè·å¾—é”å¹¶æ¶ˆè´¹è¯·æ±‚
 42:                     if (MessageModel.CLUSTERING.equals(ConsumeMessageOrderlyService.this.defaultMQPushConsumerImpl.messageModel())
 43:                         &amp;&amp; this.processQueue.isLockExpired()) {
 44:                         log.warn("the message queue lock expired, so consume later, {}", this.messageQueue);
 45:                         ConsumeMessageOrderlyService.this.tryLockLaterAndReconsume(this.messageQueue, this.processQueue, 10);
 46:                         break;
 47:                     }
 48: 
 49:                     // å½“å‰å‘¨æœŸæ¶ˆè´¹æ—¶é—´è¶…è¿‡è¿ç»­æ—¶é•¿ï¼Œé»˜è®¤ï¼š60sï¼Œæäº¤å»¶è¿Ÿæ¶ˆè´¹è¯·æ±‚ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¶ˆè´¹1åˆ†é’Ÿä¼‘æ¯10msã€‚
 50:                     long interval = System.currentTimeMillis() - beginTime;
 51:                     if (interval &gt; MAX_TIME_CONSUME_CONTINUOUSLY) {
 52:                         ConsumeMessageOrderlyService.this.submitConsumeRequestLater(processQueue, messageQueue, 10);
 53:                         break;
 54:                     }
 55: 
 56:                     // è·å–æ¶ˆè´¹æ¶ˆæ¯ã€‚æ­¤å¤„å’Œå¹¶å‘æ¶ˆæ¯è¯·æ±‚ä¸åŒï¼Œå¹¶å‘æ¶ˆæ¯è¯·æ±‚å·²ç»å¸¦äº†æ¶ˆè´¹å“ªäº›æ¶ˆæ¯ã€‚
 57:                     final int consumeBatchSize = ConsumeMessageOrderlyService.this.defaultMQPushConsumer.getConsumeMessageBatchMaxSize();
 58:                     List&lt;MessageExt&gt; msgs = this.processQueue.takeMessags(consumeBatchSize);
 59:                     if (!msgs.isEmpty()) {
 60:                         final ConsumeOrderlyContext context = new ConsumeOrderlyContext(this.messageQueue);
 61: 
 62:                         ConsumeOrderlyStatus status = null;
 63: 
 64:                         // ....çœç•¥ä»£ç ï¼šHookï¼šbefore
 65: 
 66:                         // æ‰§è¡Œæ¶ˆè´¹
 67:                         long beginTimestamp = System.currentTimeMillis();
 68:                         ConsumeReturnType returnType = ConsumeReturnType.SUCCESS;
 69:                         boolean hasException = false;
 70:                         try {
 71:                             this.processQueue.getLockConsume().lock(); // é”å®šé˜Ÿåˆ—æ¶ˆè´¹é”
 72: 
 73:                             if (this.processQueue.isDropped()) {
 74:                                 log.warn("consumeMessage, the message queue not be able to consume, because it's dropped. {}",
 75:                                     this.messageQueue);
 76:                                 break;
 77:                             }
 78: 
 79:                             status = messageListener.consumeMessage(Collections.unmodifiableList(msgs), context);
 80:                         } catch (Throwable e) {
 81:                             log.warn("consumeMessage exception: {} Group: {} Msgs: {} MQ: {}", //
 82:                                 RemotingHelper.exceptionSimpleDesc(e), //
 83:                                 ConsumeMessageOrderlyService.this.consumerGroup, //
 84:                                 msgs, //
 85:                                 messageQueue);
 86:                             hasException = true;
 87:                         } finally {
 88:                             this.processQueue.getLockConsume().unlock(); // é”å®šé˜Ÿåˆ—æ¶ˆè´¹é”
 89:                         }
 90: 
 91:                         // ....çœç•¥ä»£ç ï¼šè§£ææ¶ˆè´¹ç»“æœçŠ¶æ€
 92: 
 93:                         // ....çœç•¥ä»£ç ï¼šHookï¼šafter
 94: 
 95:                         ConsumeMessageOrderlyService.this.getConsumerStatsManager()
 96:                             .incConsumeRT(ConsumeMessageOrderlyService.this.consumerGroup, messageQueue.getTopic(), consumeRT);
 97: 
 98:                         // å¤„ç†æ¶ˆè´¹ç»“æœ
 99:                         continueConsume = ConsumeMessageOrderlyService.this.processConsumeResult(msgs, status, context, this);
100:                     } else {
101:                         continueConsume = false;
102:                     }
103:                 }
104:             } else {
105:                 if (this.processQueue.isDropped()) {
106:                     log.warn("the message queue not be able to consume, because it's dropped. {}", this.messageQueue);
107:                     return;
108:                 }
109: 
110:                 ConsumeMessageOrderlyService.this.tryLockLaterAndReconsume(this.messageQueue, this.processQueue, 100);
111:             }
112:         }
113:     }
114: 
115: }
</code></pre>
<ul>
    <li>â¬†ï¸â¬†ï¸â¬†ï¸</li>
    <li>ç¬¬ 20 è¡Œ ï¼šè·å¾— <code>Consumer</code> æ¶ˆæ¯é˜Ÿåˆ—é”ã€‚</li>
    <li>ç¬¬ 58 è¡Œ ï¼šä»æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—é¡ºåºè·å¾—æ¶ˆæ¯ã€‚<strong>å’Œå¹¶å‘æ¶ˆè´¹è·å¾—æ¶ˆæ¯ä¸åŒã€‚å¹¶å‘æ¶ˆè´¹è¯·æ±‚åœ¨è¯·æ±‚åˆ›å»ºæ—¶ï¼Œå·²ç»è®¾ç½®å¥½æ¶ˆè´¹å“ªäº›æ¶ˆæ¯ã€‚</strong></li>
    <li>ç¬¬ 71 è¡Œ ï¼šè·å¾— <code>Consumer</code> æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—æ¶ˆè´¹é”ã€‚ç›¸æ¯”ã€<code>Consumer</code>æ¶ˆæ¯é˜Ÿåˆ—é”ã€‘ï¼Œå…¶ç²’åº¦è¾ƒå°ã€‚è¿™å°±æ˜¯ä¸Šæ–‡æåˆ°çš„â“ä¸ºä»€ä¹ˆæœ‰<code>Consumer</code>æ¶ˆæ¯é˜Ÿåˆ—é”è¿˜éœ€è¦æœ‰ Consumer æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹é”å‘¢çš„åŸå› ã€‚</li>
    <li>ç¬¬ 79 è¡Œ ï¼š<strong>æ‰§è¡Œæ¶ˆè´¹</strong>ã€‚</li>
    <li>ç¬¬ 99 è¡Œ ï¼šå¤„ç†æ¶ˆè´¹ç»“æœã€‚</li>
</ul>
<h3 id="3-1-2-å¤„ç†æ¶ˆè´¹ç»“æœ" data-id="heading-7"><a href="#3-1-2-å¤„ç†æ¶ˆè´¹ç»“æœ" title="3.1.2 å¤„ç†æ¶ˆè´¹ç»“æœ"></a>3.1.2 å¤„ç†æ¶ˆè´¹ç»“æœ</h3>
<p>é¡ºåºæ¶ˆè´¹æ¶ˆæ¯ç»“æœ (<code>ConsumeOrderlyStatus</code>) æœ‰å››ç§æƒ…å†µï¼š</p>
<ul>
    <li><code>SUCCESS</code> ï¼šæ¶ˆè´¹æˆåŠŸ<strong>ä½†ä¸æäº¤</strong>ã€‚</li>
    <li><code>ROLLBACK</code> ï¼šæ¶ˆè´¹å¤±è´¥ï¼Œæ¶ˆè´¹å›æ»šã€‚</li>
    <li><code>COMMIT</code> ï¼šæ¶ˆè´¹æˆåŠŸæäº¤å¹¶ä¸”æäº¤ã€‚</li>
    <li><code>SUSPEND_CURRENT_QUEUE_A_MOMENT</code> ï¼šæ¶ˆè´¹å¤±è´¥ï¼ŒæŒ‚èµ·æ¶ˆè´¹é˜Ÿåˆ—ä¸€ä¼šä¼šï¼Œç¨åç»§ç»­æ¶ˆè´¹ã€‚</li>
</ul>
<p>è€ƒè™‘åˆ° <code>ROLLBACK</code> ã€<code>COMMIT</code> æš‚æ—¶åªä½¿ç”¨åœ¨ <code>MySQL binlog</code> åœºæ™¯ï¼Œå®˜æ–¹å°†è¿™ä¸¤çŠ¶æ€æ ‡è®°ä¸º <code>@Deprecated</code>ã€‚å½“ç„¶ï¼Œç›¸åº”çš„å®ç°é€»è¾‘ä¾ç„¶ä¿ç•™ã€‚</p>
<p>åœ¨<strong>å¹¶å‘æ¶ˆè´¹</strong>åœºæ™¯æ—¶ï¼Œå¦‚æœæ¶ˆè´¹å¤±è´¥ï¼Œ<code>Consumer</code> ä¼šå°†æ¶ˆè´¹å¤±è´¥æ¶ˆæ¯å‘å›åˆ° <code>Broker</code> é‡è¯•é˜Ÿåˆ—ï¼Œè·³è¿‡å½“å‰æ¶ˆæ¯ï¼Œç­‰å¾…ä¸‹æ¬¡æ‹‰å–è¯¥æ¶ˆæ¯å†è¿›è¡Œæ¶ˆè´¹ã€‚</p>
<p>ä½†æ˜¯åœ¨<strong>å®Œå…¨ä¸¥æ ¼é¡ºåºæ¶ˆè´¹</strong>æ¶ˆè´¹æ—¶ï¼Œè¿™æ ·åšæ˜¾ç„¶ä¸è¡Œã€‚ä¹Ÿå› æ­¤ï¼Œæ¶ˆè´¹å¤±è´¥çš„æ¶ˆæ¯ï¼Œä¼šæŒ‚èµ·é˜Ÿåˆ—ä¸€ä¼šä¼šï¼Œç¨åç»§ç»­æ¶ˆè´¹ã€‚ </p>
<p>ä¸è¿‡æ¶ˆè´¹å¤±è´¥çš„æ¶ˆæ¯ä¸€ç›´å¤±è´¥ï¼Œä¹Ÿä¸å¯èƒ½ä¸€ç›´æ¶ˆè´¹ã€‚å½“è¶…è¿‡æ¶ˆè´¹é‡è¯•ä¸Šé™æ—¶ï¼Œ<code>Consumer</code> ä¼šå°†æ¶ˆè´¹å¤±è´¥è¶…è¿‡ä¸Šé™çš„æ¶ˆæ¯å‘å›åˆ° <code>Broker</code> æ­»ä¿¡é˜Ÿåˆ—ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç ï¼š</p>
<pre><code>  1: // â¬‡ï¸â¬‡ï¸â¬‡ï¸ã€ConsumeMessageOrderlyService.javaã€‘
  2: /**
  3:  * å¤„ç†æ¶ˆè´¹ç»“æœï¼Œå¹¶è¿”å›æ˜¯å¦ç»§ç»­æ¶ˆè´¹
  4:  *
  5:  * @param msgs æ¶ˆæ¯
  6:  * @param status æ¶ˆè´¹ç»“æœçŠ¶æ€
  7:  * @param context æ¶ˆè´¹Context
  8:  * @param consumeRequest æ¶ˆè´¹è¯·æ±‚
  9:  * @return æ˜¯å¦ç»§ç»­æ¶ˆè´¹
 10:  */
 11: public boolean processConsumeResult(//
 12:     final List&lt;MessageExt&gt; msgs, //
 13:     final ConsumeOrderlyStatus status, //
 14:     final ConsumeOrderlyContext context, //
 15:     final ConsumeRequest consumeRequest//
 16: ) {
 17:     boolean continueConsume = true;
 18:     long commitOffset = -1L;
 19:     if (context.isAutoCommit()) {
 20:         switch (status) {
 21:             case COMMIT:
 22:             case ROLLBACK:
 23:                 log.warn("the message queue consume result is illegal, we think you want to ack these message {}", consumeRequest.getMessageQueue());
 24:             case SUCCESS:
 25:                 // æäº¤æ¶ˆæ¯å·²æ¶ˆè´¹æˆåŠŸåˆ°æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—
 26:                 commitOffset = consumeRequest.getProcessQueue().commit();
 27:                 // ç»Ÿè®¡
 28:                 this.getConsumerStatsManager().incConsumeOKTPS(consumerGroup, consumeRequest.getMessageQueue().getTopic(), msgs.size());
 29:                 break;
 30:             case SUSPEND_CURRENT_QUEUE_A_MOMENT:
 31:                 // ç»Ÿè®¡
 32:                 this.getConsumerStatsManager().incConsumeFailedTPS(consumerGroup, consumeRequest.getMessageQueue().getTopic(), msgs.size());
 33:                 if (checkReconsumeTimes(msgs)) { // è®¡ç®—æ˜¯å¦æš‚æ—¶æŒ‚èµ·ï¼ˆæš‚åœï¼‰æ¶ˆè´¹Næ¯«ç§’ï¼Œé»˜è®¤ï¼š10ms
 34:                     // è®¾ç½®æ¶ˆæ¯é‡æ–°æ¶ˆè´¹
 35:                     consumeRequest.getProcessQueue().makeMessageToCosumeAgain(msgs);
 36:                     // æäº¤å»¶è¿Ÿæ¶ˆè´¹è¯·æ±‚
 37:                     this.submitConsumeRequestLater(//
 38:                         consumeRequest.getProcessQueue(), //
 39:                         consumeRequest.getMessageQueue(), //
 40:                         context.getSuspendCurrentQueueTimeMillis());
 41:                     continueConsume = false;
 42:                 } else {
 43:                     commitOffset = consumeRequest.getProcessQueue().commit();
 44:                 }
 45:                 break;
 46:             default:
 47:                 break;
 48:         }
 49:     } else {
 50:         switch (status) {
 51:             case SUCCESS:
 52:                 this.getConsumerStatsManager().incConsumeOKTPS(consumerGroup, consumeRequest.getMessageQueue().getTopic(), msgs.size());
 53:                 break;
 54:             case COMMIT:
 55:                 // æäº¤æ¶ˆæ¯å·²æ¶ˆè´¹æˆåŠŸåˆ°æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—
 56:                 commitOffset = consumeRequest.getProcessQueue().commit();
 57:                 break;
 58:             case ROLLBACK:
 59:                 // è®¾ç½®æ¶ˆæ¯é‡æ–°æ¶ˆè´¹
 60:                 consumeRequest.getProcessQueue().rollback();
 61:                 this.submitConsumeRequestLater(//
 62:                     consumeRequest.getProcessQueue(), //
 63:                     consumeRequest.getMessageQueue(), //
 64:                     context.getSuspendCurrentQueueTimeMillis());
 65:                 continueConsume = false;
 66:                 break;
 67:             case SUSPEND_CURRENT_QUEUE_A_MOMENT: // è®¡ç®—æ˜¯å¦æš‚æ—¶æŒ‚èµ·ï¼ˆæš‚åœï¼‰æ¶ˆè´¹Næ¯«ç§’ï¼Œé»˜è®¤ï¼š10ms
 68:                 this.getConsumerStatsManager().incConsumeFailedTPS(consumerGroup, consumeRequest.getMessageQueue().getTopic(), msgs.size());
 69:                 if (checkReconsumeTimes(msgs)) {
 70:                     // è®¾ç½®æ¶ˆæ¯é‡æ–°æ¶ˆè´¹
 71:                     consumeRequest.getProcessQueue().makeMessageToCosumeAgain(msgs);
 72:                     // æäº¤å»¶è¿Ÿæ¶ˆè´¹è¯·æ±‚
 73:                     this.submitConsumeRequestLater(//
 74:                         consumeRequest.getProcessQueue(), //
 75:                         consumeRequest.getMessageQueue(), //
 76:                         context.getSuspendCurrentQueueTimeMillis());
 77:                     continueConsume = false;
 78:                 }
 79:                 break;
 80:             default:
 81:                 break;
 82:         }
 83:     }
 84: 
 85:     // æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—æœªdroppedï¼Œæäº¤æœ‰æ•ˆæ¶ˆè´¹è¿›åº¦
 86:     if (commitOffset &gt;= 0 &amp;&amp; !consumeRequest.getProcessQueue().isDropped()) {
 87:         this.defaultMQPushConsumerImpl.getOffsetStore().updateOffset(consumeRequest.getMessageQueue(), commitOffset, false);
 88:     }
 89: 
 90:     return continueConsume;
 91: }
 92: 
 93: private int getMaxReconsumeTimes() {
 94:     // default reconsume times: Integer.MAX_VALUE
 95:     if (this.defaultMQPushConsumer.getMaxReconsumeTimes() == -1) {
 96:         return Integer.MAX_VALUE;
 97:     } else {
 98:         return this.defaultMQPushConsumer.getMaxReconsumeTimes();
 99:     }
100: }
101: 
102: /**
103:  * è®¡ç®—æ˜¯å¦è¦æš‚åœæ¶ˆè´¹
104:  * ä¸æš‚åœæ¡ä»¶ï¼šå­˜åœ¨æ¶ˆæ¯éƒ½è¶…è¿‡æœ€å¤§æ¶ˆè´¹æ¬¡æ•°å¹¶ä¸”éƒ½å‘å›brokeræˆåŠŸ
105:  *
106:  * @param msgs æ¶ˆæ¯
107:  * @return æ˜¯å¦è¦æš‚åœ
108:  */
109: private boolean checkReconsumeTimes(List&lt;MessageExt&gt; msgs) {
110:     boolean suspend = false;
111:     if (msgs != null &amp;&amp; !msgs.isEmpty()) {
112:         for (MessageExt msg : msgs) {
113:             if (msg.getReconsumeTimes() &gt;= getMaxReconsumeTimes()) {
114:                 MessageAccessor.setReconsumeTime(msg, String.valueOf(msg.getReconsumeTimes()));
115:                 if (!sendMessageBack(msg)) { // å‘å›å¤±è´¥ï¼Œä¸­æ–­
116:                     suspend = true;
117:                     msg.setReconsumeTimes(msg.getReconsumeTimes() + 1);
118:                 }
119:             } else {
120:                 suspend = true;
121:                 msg.setReconsumeTimes(msg.getReconsumeTimes() + 1);
122:             }
123:         }
124:     }
125:     return suspend;
126: }
127: 
128: /**
129:  * å‘å›æ¶ˆæ¯ã€‚
130:  * æ¶ˆæ¯å‘å›brokeråï¼Œå¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ­»ä¿¡é˜Ÿåˆ—ã€‚
131:  *
132:  * @param msg æ¶ˆæ¯
133:  * @return æ˜¯å¦å‘é€æˆåŠŸ
134:  */
135: public boolean sendMessageBack(final MessageExt msg) {
136:     try {
137:         // max reconsume times exceeded then send to dead letter queue.
138:         Message newMsg = new Message(MixAll.getRetryTopic(this.defaultMQPushConsumer.getConsumerGroup()), msg.getBody());
139:         String originMsgId = MessageAccessor.getOriginMessageId(msg);
140:         MessageAccessor.setOriginMessageId(newMsg, UtilAll.isBlank(originMsgId) ? msg.getMsgId() : originMsgId);
141:         newMsg.setFlag(msg.getFlag());
142:         MessageAccessor.setProperties(newMsg, msg.getProperties());
143:         MessageAccessor.putProperty(newMsg, MessageConst.PROPERTY_RETRY_TOPIC, msg.getTopic());
144:         MessageAccessor.setReconsumeTime(newMsg, String.valueOf(msg.getReconsumeTimes()));
145:         MessageAccessor.setMaxReconsumeTimes(newMsg, String.valueOf(getMaxReconsumeTimes()));
146:         newMsg.setDelayTimeLevel(3 + msg.getReconsumeTimes());
147: 
148:         this.defaultMQPushConsumer.getDefaultMQPushConsumerImpl().getmQClientFactory().getDefaultMQProducer().send(newMsg);
149:         return true;
150:     } catch (Exception e) {
151:         log.error("sendMessageBack exception, group: " + this.consumerGroup + " msg: " + msg.toString(), e);
152:     }
153: 
154:     return false;
155: }
</code></pre>
<ul>
    <li>â¬†ï¸â¬†ï¸â¬†ï¸</li>
    <li>ç¬¬ 21 è‡³ 29 è¡Œ ï¼šæ¶ˆè´¹æˆåŠŸã€‚åœ¨è‡ªåŠ¨æäº¤è¿›åº¦( <code>AutoCommit</code> )çš„æƒ…å†µä¸‹ï¼Œ<code>COMMIT</code>ã€<code>ROLLBACK</code>ã€<code>SUCCESS</code> é€»è¾‘<strong>å·²ç»ç»Ÿä¸€</strong>ã€‚</li>
    <li>ç¬¬ 30 è‡³ 45 è¡Œ ï¼šæ¶ˆè´¹å¤±è´¥ã€‚å½“æ¶ˆæ¯é‡è¯•æ¬¡æ•°è¶…è¿‡ä¸Šé™ï¼ˆé»˜è®¤ ï¼š16æ¬¡ï¼‰æ—¶ï¼Œå°†æ¶ˆæ¯å‘é€åˆ° <code>Broker</code> æ­»ä¿¡é˜Ÿåˆ—ï¼Œè·³è¿‡è¿™äº›æ¶ˆæ¯ã€‚æ­¤æ—¶ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ— éœ€æŒ‚èµ·ï¼Œç»§ç»­æ¶ˆè´¹åé¢çš„æ¶ˆæ¯ã€‚</li>
    <li>ç¬¬ 85 è‡³ 88 è¡Œ ï¼šæäº¤æ¶ˆè´¹è¿›åº¦ã€‚</li>
</ul>
<h3 id="3-13-æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—æ ¸å¿ƒæ–¹æ³•" data-id="heading-8"><a href="#3-13-æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—æ ¸å¿ƒæ–¹æ³•" title="3.13 æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—æ ¸å¿ƒæ–¹æ³•"></a>3.13 æ¶ˆæ¯å¤„ç†é˜Ÿåˆ—æ ¸å¿ƒæ–¹æ³•</h3>
<p>ğŸ˜ˆæ¶‰åŠåˆ°çš„å››ä¸ªæ ¸å¿ƒæ–¹æ³•çš„æºç ï¼š</p>
<pre><code>  1: // â¬‡ï¸â¬‡ï¸â¬‡ï¸ã€ProcessQueue.javaã€‘
  2: /**
  3:  * æ¶ˆæ¯æ˜ å°„
  4:  * keyï¼šæ¶ˆæ¯é˜Ÿåˆ—ä½ç½®
  5:  */
  6: private final TreeMap&lt;Long, MessageExt&gt; msgTreeMap = new TreeMap&lt;&gt;();    /**
  7:  * æ¶ˆæ¯æ˜ å°„ä¸´æ—¶å­˜å‚¨ï¼ˆæ¶ˆè´¹ä¸­çš„æ¶ˆæ¯ï¼‰
  8:  */
  9: private final TreeMap&lt;Long, MessageExt&gt; msgTreeMapTemp = new TreeMap&lt;&gt;();
 10: 
 11: /**
 12:  * å›æ»šæ¶ˆè´¹ä¸­çš„æ¶ˆæ¯
 13:  * é€»è¾‘ç±»ä¼¼äº{@link #makeMessageToCosumeAgain(List)}
 14:  */
 15: public void rollback() {
 16:     try {
 17:         this.lockTreeMap.writeLock().lockInterruptibly();
 18:         try {
 19:             this.msgTreeMap.putAll(this.msgTreeMapTemp);
 20:             this.msgTreeMapTemp.clear();
 21:         } finally {
 22:             this.lockTreeMap.writeLock().unlock();
 23:         }
 24:     } catch (InterruptedException e) {
 25:         log.error("rollback exception", e);
 26:     }
 27: }
 28: 
 29: /**
 30:  * æäº¤æ¶ˆè´¹ä¸­çš„æ¶ˆæ¯å·²æ¶ˆè´¹æˆåŠŸï¼Œè¿”å›æ¶ˆè´¹è¿›åº¦
 31:  *
 32:  * @return æ¶ˆè´¹è¿›åº¦
 33:  */
 34: public long commit() {
 35:     try {
 36:         this.lockTreeMap.writeLock().lockInterruptibly();
 37:         try {
 38:             // æ¶ˆè´¹è¿›åº¦
 39:             Long offset = this.msgTreeMapTemp.lastKey();
 40: 
 41:             //
 42:             msgCount.addAndGet(this.msgTreeMapTemp.size() * (-1));
 43: 
 44:             //
 45:             this.msgTreeMapTemp.clear();
 46: 
 47:             // è¿”å›æ¶ˆè´¹è¿›åº¦
 48:             if (offset != null) {
 49:                 return offset + 1;
 50:             }
 51:         } finally {
 52:             this.lockTreeMap.writeLock().unlock();
 53:         }
 54:     } catch (InterruptedException e) {
 55:         log.error("commit exception", e);
 56:     }
 57: 
 58:     return -1;
 59: }
 60: 
 61: /**
 62:  * æŒ‡å®šæ¶ˆæ¯é‡æ–°æ¶ˆè´¹
 63:  * é€»è¾‘ç±»ä¼¼äº{@link #rollback()}
 64:  *
 65:  * @param msgs æ¶ˆæ¯
 66:  */
 67: public void makeMessageToCosumeAgain(List&lt;MessageExt&gt; msgs) {
 68:     try {
 69:         this.lockTreeMap.writeLock().lockInterruptibly();
 70:         try {
 71:             for (MessageExt msg : msgs) {
 72:                 this.msgTreeMapTemp.remove(msg.getQueueOffset());
 73:                 this.msgTreeMap.put(msg.getQueueOffset(), msg);
 74:             }
 75:         } finally {
 76:             this.lockTreeMap.writeLock().unlock();
 77:         }
 78:     } catch (InterruptedException e) {
 79:         log.error("makeMessageToCosumeAgain exception", e);
 80:     }
 81: }
 82: 
 83: /**
 84:  * è·å¾—æŒæœ‰æ¶ˆæ¯å‰Næ¡
 85:  *
 86:  * @param batchSize æ¡æ•°
 87:  * @return æ¶ˆæ¯
 88:  */
 89: public List&lt;MessageExt&gt; takeMessags(final int batchSize) {
 90:     List&lt;MessageExt&gt; result = new ArrayList&lt;&gt;(batchSize);
 91:     final long now = System.currentTimeMillis();
 92:     try {
 93:         this.lockTreeMap.writeLock().lockInterruptibly();
 94:         this.lastConsumeTimestamp = now;
 95:         try {
 96:             if (!this.msgTreeMap.isEmpty()) {
 97:                 for (int i = 0; i &lt; batchSize; i++) {
 98:                     Map.Entry&lt;Long, MessageExt&gt; entry = this.msgTreeMap.pollFirstEntry();
 99:                     if (entry != null) {
100:                         result.add(entry.getValue());
101:                         msgTreeMapTemp.put(entry.getKey(), entry.getValue());
102:                     } else {
103:                         break;
104:                     }
105:                 }
106:             }
107: 
108:             if (result.isEmpty()) {
109:                 consuming = false;
110:             }
111:         } finally {
112:             this.lockTreeMap.writeLock().unlock();
113:         }
114:     } catch (InterruptedException e) {
115:         log.error("take Messages exception", e);
116:     }
117: 
118:     return result;
119: }
</code></pre>
<h1 id="666-å½©è›‹" data-id="heading-9"><a href="#666-å½©è›‹" title="666. å½©è›‹"></a>666. å½©è›‹</h1>
<p><img alt="çŸ¥è¯†æ˜Ÿçƒ" class="lazyload inited" data-src="https://user-gold-cdn.xitu.io/2018/10/18/166840b9e1e4b9c1?imageView2/0/w/1280/h/960/ignore-error/1" data-width="987" data-height="555" src="data:image/svg+xml;utf8,&lt;?xml version=&quot;1.0&quot;?&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;987&quot; height=&quot;555&quot;&gt;&lt;/svg&gt;"></p></div><div data-v-41d33d72="" class="footer"><ul data-v-41d33d72="" class="tag-list"><li data-v-41d33d72="" class="item"><a data-v-41d33d72="" href="/tag/%E6%BA%90%E7%A0%81" class="">æºç </a></li><li data-v-41d33d72="" class="item"><a data-v-41d33d72="" href="/tag/%E5%90%8E%E7%AB%AF" class="">åç«¯</a></li><li data-v-41d33d72="" class="item"><a data-v-41d33d72="" href="/tag/%E5%BE%AE%E4%BF%A1" class="">å¾®ä¿¡</a></li><li data-v-41d33d72="" class="item"><a data-v-41d33d72="" href="/tag/%E6%95%B0%E6%8D%AE%E5%BA%93" class="">æ•°æ®åº“</a></li></ul><section data-v-41d33d72=""><div data-v-a0f279e6="" data-v-41d33d72="" class="wechat-banner wechat-banner"><img data-v-a0f279e6="" src="https://b-gold-cdn.xitu.io/v3/static/img/backend.58ef824.png" class="wechat-img"></div></section><!----><div data-v-41d33d72="" class="related-entry-list-box"><div data-v-41d33d72="" class="title">ç›¸å…³çƒ­é—¨æ–‡ç« </div><ul data-v-41d33d72="" class="related-entry-list"><li data-v-41d33d72="" class="item"><div data-v-9db545a6="" data-v-41d33d72="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-9db545a6="" href="/post/5bcd19fbe51d457a964d08d7" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-b2db8566="" data-v-009ea7bb="" data-v-9db545a6="" data-src="https://user-gold-cdn.xitu.io/2018/10/22/166992e6a299bda1?imageView2/1/q/85/interlace/1" class="lazy thumb thumb loaded" style="background-image: url(https://user-gold-cdn.xitu.io/2018/10/22/166992e6a299bda1?imageView2/1/q/85/interlace/1); background-size: cover;"></div><div data-v-9db545a6="" class="info"><div data-v-9db545a6="" class="row title-row"><span data-v-9db545a6="" class="title">çœ‹å›¾è½»æ¾ç†è§£æ•°æ®ç»“æ„ä¸ç®—æ³•ç³»åˆ—(çº¢é»‘æ ‘)</span></div><div data-v-9db545a6="" class="row meta-row"><ul data-v-9db545a6="" class="meta-list"><li data-v-9db545a6="" class="meta user"><div data-v-9db545a6="" class="username">è¶…äººæ±ªå°å»º</div></li><li data-v-9db545a6="" class="meta like"><div data-v-9db545a6="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-9db545a6="" class="count">28</div></li><li data-v-9db545a6="" class="meta comment"><div data-v-9db545a6="" class="icon icon-comments iconfont icon-xlchatbox"></div><div data-v-9db545a6="" class="count">2</div></li></ul></div></div></a></div></li><li data-v-41d33d72="" class="item"><div data-v-9db545a6="" data-v-41d33d72="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-9db545a6="" href="/post/5bc7067c6fb9a05d1117b2ef" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-b2db8566="" data-v-009ea7bb="" data-v-9db545a6="" data-src="https://user-gold-cdn.xitu.io/2018/10/17/1668182dda1ee6b2?imageView2/1/q/85/interlace/1" class="lazy thumb thumb loaded" style="background-image: url(https://user-gold-cdn.xitu.io/2018/10/17/1668182dda1ee6b2?imageView2/1/q/85/interlace/1); background-size: cover;"></div><div data-v-9db545a6="" class="info"><div data-v-9db545a6="" class="row title-row"><span data-v-9db545a6="" class="title">æ˜é‡‘ç›´æ’­ ç¬¬åä¸€æœŸå°ç¨‹åºä¸“åœº  æ‰“ç æŒ‡å—ï¼šç”±çŒ«çœ¼çº¿ä¸‹æ‰«ç 1åˆ†è´­è°ˆèµ·</span></div><div data-v-9db545a6="" class="row meta-row"><ul data-v-9db545a6="" class="meta-list"><li data-v-9db545a6="" class="meta user"><div data-v-9db545a6="" class="username">æ˜é‡‘ç›´æ’­</div></li><li data-v-9db545a6="" class="meta like"><div data-v-9db545a6="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-9db545a6="" class="count">5</div></li><!----></ul></div></div></a></div></li><li data-v-41d33d72="" class="item"><div data-v-9db545a6="" data-v-41d33d72="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-9db545a6="" href="/post/5bcd157b6fb9a05d0b146ef7" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-b2db8566="" data-v-009ea7bb="" data-v-9db545a6="" data-src="https://user-gold-cdn.xitu.io/2018/10/22/166991cc3e7465f9?imageView2/1/q/85/interlace/1" class="lazy thumb thumb loaded" style="background-image: url(https://user-gold-cdn.xitu.io/2018/10/22/166991cc3e7465f9?imageView2/1/q/85/interlace/1); background-size: cover;"></div><div data-v-9db545a6="" class="info"><div data-v-9db545a6="" class="row title-row"><span data-v-9db545a6="" class="title">åˆ©ç”¨è´£ä»»é“¾æ¨¡å¼è®¾è®¡ä¸€ä¸ªæ‹¦æˆªå™¨</span></div><div data-v-9db545a6="" class="row meta-row"><ul data-v-9db545a6="" class="meta-list"><li data-v-9db545a6="" class="meta user"><div data-v-9db545a6="" class="username">crossoverJie</div></li><li data-v-9db545a6="" class="meta like"><div data-v-9db545a6="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-9db545a6="" class="count">19</div></li><li data-v-9db545a6="" class="meta comment"><div data-v-9db545a6="" class="icon icon-comments iconfont icon-xlchatbox"></div><div data-v-9db545a6="" class="count">2</div></li></ul></div></div></a></div></li><li data-v-41d33d72="" class="item"><div data-v-9db545a6="" data-v-41d33d72="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-9db545a6="" href="/post/5bcd2022f265da0abe273330" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-b2db8566="" data-v-009ea7bb="" data-v-9db545a6="" data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAACgBAMAAACPjaivAAAAElBMVEXi6O3////R3ujj6e/c5u3X4usQB3wbAAABCElEQVR42u3Vy03FQBBE0U6BDBCfPSEQAvlHw44FmvaoEbJLz+dGcORWeUqSJEmSJEmS/trTphoGCAi4CRAQcNMtgfUrQMDjbjgSQMBJgIDTjgyAj3JiQMBJtwTG/2bigfEnBgScdEtg/G8mHhh/YkDASYCAgJsAAQE3AQICbgIEBNwECPgvwJef3mrY2cCvGnY28KOGnQx8rcs7Btb1LYE5E2mAORNpgEEXXgNzJtIAgz7gGpgzkQaYM5EGmPKKtMCciRwBPyuiFvheGS2BQRdeA3Mm0gOfK6QlMGciDTBnIg0w6MJrYM5EGmDQB1wDcybSAHMm0gBTXpEWmDMRSZIkSZIk6cK+AUdTxLnCoi0gAAAAAElFTkSuQmCC" class="lazy thumb thumb loaded" style="background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAACgBAMAAACPjaivAAAAElBMVEXi6O3////R3ujj6e/c5u3X4usQB3wbAAABCElEQVR42u3Vy03FQBBE0U6BDBCfPSEQAvlHw44FmvaoEbJLz+dGcORWeUqSJEmSJEmS/trTphoGCAi4CRAQcNMtgfUrQMDjbjgSQMBJgIDTjgyAj3JiQMBJtwTG/2bigfEnBgScdEtg/G8mHhh/YkDASYCAgJsAAQE3AQICbgIEBNwECPgvwJef3mrY2cCvGnY28KOGnQx8rcs7Btb1LYE5E2mAORNpgEEXXgNzJtIAgz7gGpgzkQaYM5EGmPKKtMCciRwBPyuiFvheGS2BQRdeA3Mm0gOfK6QlMGciDTBnIg0w6MJrYM5EGmDQB1wDcybSAHMm0gBTXpEWmDMRSZIkSZIk6cK+AUdTxLnCoi0gAAAAAElFTkSuQmCC); background-size: cover;"></div><div data-v-9db545a6="" class="info"><div data-v-9db545a6="" class="row title-row"><span data-v-9db545a6="" class="title">Goè¯­è¨€æ€§èƒ½ä¼˜åŒ–- For Range æ€§èƒ½ç ”ç©¶</span></div><div data-v-9db545a6="" class="row meta-row"><ul data-v-9db545a6="" class="meta-list"><li data-v-9db545a6="" class="meta user"><div data-v-9db545a6="" class="username">é£é›ªæ— æƒ…</div></li><li data-v-9db545a6="" class="meta like"><div data-v-9db545a6="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-9db545a6="" class="count">8</div></li><!----></ul></div></div></a></div></li></ul></div></div></article><div data-v-4f97d566="" data-v-41d33d72="" class="comment-list-box" id="comment-box" data-v-3f216172=""><div data-v-4f97d566="" class="title">è¯„è®º</div><div data-v-1cbbd4f0="" data-v-4f97d566="" class="comment-form comment-form"><div data-v-1cbbd4f0="" class="avatar-box"><div data-v-b2db8566="" data-v-1b9df826="" data-v-1cbbd4f0="" data-src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCIgdmlld0JveD0iMCAwIDM2IDM2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4zLjMgKDEyMDgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5kZWZhdWx0X2dyYXZhdGFyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc2tldGNoOnR5cGU9Ik1TUGFnZSI+CiAgICAgICAgPGcgaWQ9ImRlZmF1bHRfZ3JhdmF0YXIiIHNrZXRjaDp0eXBlPSJNU0FydGJvYXJkR3JvdXAiPgogICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTIxMC0rLUltcG9ydGVkLUxheWVycy1Db3B5LUNvcHkiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0yMTAiIGZpbGw9IiNEOEQ4RDgiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiIHg9IjAiIHk9IjAiIHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTI3Ljg2OTAzMjEsMjYuODUzNjU2OCBMOCwyNi44NTM2NTY4IEM4LDI1Ljg0OTQ1MTQgOC40NzE4MjUsMjQuMTEwOTQ2NiAxMS41MTg5MDQ1LDIyLjM4ODMxNzYgQzEyLjE1Nzg5NiwyMi4wMjcxMjEzIDE1LjM0Mzk1MTIsMjAuMDk2MTA5OCAxNS42MTU5Njc3LDE5LjYzNzE3MjEgQzE1LjkyNDU4MjgsMTkuMTE3MjA4MSAxNi4wMTA2Mzg5LDE4LjQ3NjE4MzcgMTUuNDIwMTE1OCwxNy41MzI1MDg1IEMxNS4zNzI2MzY2LDE3LjQ1NjEwMTYgMTQuNDM0OTIxNSwxNi4wMDgzMzkxIDE0LjE0NTEwMDMsMTUuMDMwNDI5NyBDMTMuOTQwMzQ2LDE0LjMzODMwMiAxMy45MTc1OTU1LDEzLjU0NTQ1NjEgMTMuOTE3NTk1NSwxMi43MTM0MTQ0IEMxMy45MTc1OTU1LDkuODM2MjQ3MDIgMTUuNzIyMzAxNCw4IDE3Ljk0ODM4NTYsOCBDMjAuMTc0NDY5OSw4IDIxLjk3OTE3NTgsOS44MzYyNDcwMiAyMS45NzkxNzU4LDEyLjcxMzQxNDQgQzIxLjk3OTE3NTgsMTMuMzk5MDkyMiAyMS45NjYzMTY4LDE0LjA1NTk5MzMgMjEuODQ3MTI0MSwxNC42NTM4NTI3IEMyMS42Mzk4OTcsMTUuNjkwMzA3NyAyMC43NzU4NzM2LDE3LjAwNTU5ODQgMjAuNTg4NDI5NSwxNy4zMzA1NzU5IEMyMC41NDM5MTc3LDE3LjQwNzQ3OSAyMC41MDc4MTM3LDE3LjQ2NzUxMyAyMC40ODUwNjMzLDE3LjUwMTI1MTEgQzIwLjA3OTAxNjgsMTguMTA3MDQ4OSAxOS45NjI3OTE2LDE4LjU1MzU4MjkgMjAuMDAwODczOSwxOC45MTUyNzU1IEMyMC4wNDQzOTY1LDE5LjMyODU2NzUgMjAuMzEzOTQwMSwxOS42MTYzMzM4IDIwLjY2NzA2NywxOS44NTQ0ODUzIEMyMS4wMzQ1MzY2LDIwLjEwMjA2MzYgMjQuMDExODgxLDIyLjE0OTY3IDI0LjM3Nzg2NjgsMjIuMzg4MzE3NiBDMjYuODcxNTE2MywyNC4wMTY2NzgzIDI3Ljg2OTAzMjEsMjUuNjA2MzM4NSAyNy44NjkwMzIxLDI2Ljg1MzY1NjggTDI3Ljg2OTAzMjEsMjYuODUzNjU2OCBaIiBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIGZpbGw9IiNGRkZGRkYiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+" class="lazy avatar avatar" title="" style="background-image: none;"></div></div><div data-v-1cbbd4f0="" class="form-box"><div data-v-1cbbd4f0="" class="input-box"><div data-v-1cbbd4f0="" contenteditable="true" spellcheck="false" placeholder="è¾“å…¥è¯„è®º..." class="rich-input empty"><br data-v-1cbbd4f0=""></div><!----></div><!----></div><input data-v-1cbbd4f0="" type="file" class="hidden"></div><!----><!----></div></div><div data-v-41d33d72="" data-v-3f216172="" st:block="aside" class="entry-public-aside"><div data-v-70a2cd6d="" data-v-fb64097a="" data-v-41d33d72="" class="sidebar-block app-download-sidebar-block shadow"><!----><div data-v-70a2cd6d="" class="block-body"><a data-v-fb64097a="" data-v-70a2cd6d="" class="app-link" href="https://juejin.im/app" target="_blank"><img data-v-fb64097a="" data-v-70a2cd6d="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAEx0lEQVR4Xu2c7XbbMAxD0zffm2cna7NlbuwLkJJjN+hfUiQF8ENS0nxcr9frJX+HQeDjRsjHr/3juT74fOb/Ub6MTomX7C9tdv2NQjCEfCEZQlIhT4sqFZIK+UTA7fFuj+7a7653473rr1bIVk91ndHQVob01hAm+xQvrSc52Sf5o/0QcrlcCHCSE+AkDyELhAhwkhPgJLcJmd1SKvZpk26Lc/W7M2ZtvdSyKoBRwM6Mqvh3AXb1aX+UMCEE7j0hxHiuSYUMuCdQSe/dsqiFpEKaFdJ9e+omBCUcJcCPmyEhhChfyCmDRmboMjRl5oz0r/hTW+Ihjr2VDakbVPPIrThKOPJ76Ja1ByEEYAgx7wXVjLuvCyHGB1CpkH/p9jYz5EdVCLULktNrKcmVU5RzaqJ49/Znv/a6G3A3FELMlhVCviMwsiKlCumSQOudnl4Z+l37tJ72V5Wf4lsn1NJeIa8CTutCSPEzdQK2Kg8hIeQzd6hHk5wykNZ35eS/Kv9TIdXFo9ZVZgD5HnkKIl8j5SFkJJoDbIWQASCONFEe6u5z9TJo6uEjN/nMVjd+iq9q/7SEVDd8B7K7PoQsEOgC2l0fQkLIdg6cfQbsHb/q7+kpS3nMUx0869mK/dEtwW1Ro/en2gshg55OCHCS3xMwhLwrIdSCunLKQJLP9q/aH1IhS2fKjCCAOj2fNj/77ayz/xDyxR4lCJHsrl/TDyEh5BOBURmlHqvJH8mpQlz5rhXiBuf2XLJPM6KyntaQXP18ZkrLouC6hwCyH0IIIZCnQv4BNKRCFECXnLg929Xf8kf5U9kP2VSP8UM+MaxswAXY1e8QMrulbtkPIZTaK08rswgPIWckhE4tZ29ZI/anHmtv/G/hJVUIBaz0XHWoPbvoURK78bnxdu0r/u46IaT4/O5URAhZPM10K2z3CtljBhAorrx7DCZ/s+2v+R/yvSzKoArhrwbMnXkUr3oxDiErSIYQM8Vmt5QQYhIyW31Pwr/90+fszbn2R8wcAtQ5tirxOPa28JDuIS6gXX0FAPIRQgghQ/72hCgAUMapxzqDl6mq7n7cYNxDwV1fPva6G3D1XULdDbv2XQK27CtPJyFk8O91hZCNXzWd0YLdinEr+O0rxAXY1a+27EMce+ktzAVDqRCy6dwrKH5HHkIKb1nOkL7phhDjV7PXKuWlFTKixKkFuMdOtwe7+hQv2SN51b58DyEHrrybgc4xU2kxeybMVjwhRJghzgyotMBvr72vbllUXUp8Myvu7QhRACfSqKeTfM+Whd/LogwgMEhO9iuEVG/Ca8fQ0TPJje/uX/plawKc5CHkf4RSIc1/oesmnHPKkyqk21JmVAiB5M4E156rr86wQxDibm5GgrgxuPohZIGYCogLtKqv+k+FqIg29X4UIZUWdbQZovJ5igqpHAq6N/fqPUIFfi1hQojweYVzbA0hBUAVgN+6QiozQh2S1Yx91Qw6RMs6GyEzKyyEiCXktjBX33pcnJHB3ZbTXS/y8FfNBdjVPz0hLqB7608lpLuZ7j1iRoXOHtrOPegxFmmGhBAfgRDSfEwcPZOGE+LnhLeCACC55+312upMOcTXgLozRrkXuDOjmuE3P7SfrXhDSAFAqrcOIb8BQLPhcIRSNNMAAAAASUVORK5CYII=" class="qr-img"><div data-v-fb64097a="" data-v-70a2cd6d="" class="content-box"><div data-v-fb64097a="" data-v-70a2cd6d="" class="headline">ä¸‹è½½æ˜é‡‘å®¢æˆ·ç«¯</div><div data-v-fb64097a="" data-v-70a2cd6d="" class="desc">ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</div></div><!----></a></div></div><div data-v-70a2cd6d="" data-v-1988842d="" data-v-41d33d72="" class="sidebar-block wechat-sidebar-block pure"><div data-v-a0f279e6="" data-v-1988842d="" class="wechat-banner" data-v-70a2cd6d=""><img data-v-a0f279e6="" src="https://b-gold-cdn.xitu.io/v3/static/img/backend.ba44b94.png" class="wechat-img"></div><!----></div><div data-v-1f85cb5f="" data-v-17a8ac96="" data-v-41d33d72="" class="index-book-collect" place="entry" category="5562b419e4b00c57d9b94ae2"><div data-v-1f85cb5f="" class="header"><div data-v-1f85cb5f="" class="title">æ˜é‡‘å°å†Œ</div><div data-v-1f85cb5f="" class="controllers"><div data-v-1f85cb5f="" class="arrow icon ion-chevron-left"></div><div data-v-1f85cb5f="" class="arrow icon ion-chevron-right"></div></div></div><div data-v-1f85cb5f="" class="slide-book transition--next"><div data-v-133abdc5="" data-v-1f85cb5f="" class="slide-book-list item"><a data-v-133abdc5="" href="/book/5addb2eb6fb9a07abd0d4557" class="item"><div data-v-133abdc5="" class="poster"><div data-v-b2db8566="" data-v-009ea7bb="" data-v-133abdc5="" data-src="https://user-gold-cdn.xitu.io/2018/5/17/1636d772f3d23cf1?imageView2/1/w/104/h/144/q/95/interlace/1" class="lazy thumb poster-img loaded" style="background-image: url(https://user-gold-cdn.xitu.io/2018/5/17/1636d772f3d23cf1?imageView2/1/w/104/h/144/q/95/interlace/1); background-size: cover;"></div></div><div data-v-133abdc5="" class="content-text"><div data-v-133abdc5="" class="title">åŒºå—é“¾å¼€å‘å…¥é—¨ï¼šä» 0 åˆ° 1 æ„å»ºåŸºäºä»¥å¤ªåŠæ™ºèƒ½åˆçº¦çš„ ICO DApp</div><div data-v-133abdc5="" class="price"><div data-v-133abdc5="" class="new">æ–°äººä»· ï¿¥34.50</div><div data-v-133abdc5="" class="delete">ï¿¥69</div></div></div></a><a data-v-133abdc5="" href="/book/5a0ab8e2f265da43111fbab2" class="item"><div data-v-133abdc5="" class="poster"><div data-v-b2db8566="" data-v-009ea7bb="" data-v-133abdc5="" data-src="https://user-gold-cdn.xitu.io/2017/11/20/15fd79563b28dd6e?imageView2/1/w/104/h/144/q/95/interlace/1" class="lazy thumb poster-img loaded" style="background-image: url(https://user-gold-cdn.xitu.io/2017/11/20/15fd79563b28dd6e?imageView2/1/w/104/h/144/q/95/interlace/1); background-size: cover;"></div></div><div data-v-133abdc5="" class="content-text"><div data-v-133abdc5="" class="title">å¦‚ä½•ä½¿ç”¨ Canvas åˆ¶ä½œå‡ºç‚«é…·çš„ç½‘é¡µèƒŒæ™¯ç‰¹æ•ˆ</div><div data-v-133abdc5="" class="price"><div data-v-133abdc5="" class="new">æ–°äººä»· ï¿¥4.95</div><div data-v-133abdc5="" class="delete">ï¿¥9.9</div></div></div></a></div></div><div data-v-1f85cb5f="" class="book-newuser"><div data-v-1f85cb5f="" class="newuser-title"><span data-v-1f85cb5f="">æ–°äººä¸“äº«å¥½ç¤¼</span></div><div data-v-1f85cb5f="" class="giftbag"><img data-v-1f85cb5f="" src="https://b-gold-cdn.xitu.io/v3/static/img/45.b99ea03.svg"><div data-v-1f85cb5f="" class="content-text"><div data-v-1f85cb5f="" class="title">é€ä½ <span data-v-1f85cb5f="" class="highlight">45å…ƒ</span>ä¹°å°å†Œ</div><div data-v-1f85cb5f="" class="btn-box"><div data-v-1f85cb5f="" class="btn-giftbag">ç«‹å³é¢†å–</div></div></div></div></div></div><!----><div data-v-70a2cd6d="" data-v-f6632f66="" data-v-41d33d72="" class="sidebar-block related-entry-sidebar-block sticky-section shadow" st:block="relatedEntrySidebarBlock" data-v-3f216172=""><div data-v-70a2cd6d="" class="block-title">ç›¸å…³æ–‡ç« </div><div data-v-70a2cd6d="" class="block-body"><div data-v-f6632f66="" data-v-70a2cd6d="" class="entry-list"><a data-v-f6632f66="" href="/post/5bcd19fbe51d457a964d08d7" target="_blank" rel="" st:name="link" class="item" data-v-70a2cd6d=""><div data-v-f6632f66="" class="entry-title">çœ‹å›¾è½»æ¾ç†è§£æ•°æ®ç»“æ„ä¸ç®—æ³•ç³»åˆ—(çº¢é»‘æ ‘)</div><div data-v-f6632f66="" class="entry-meta-box"><div data-v-f6632f66="" class="entry-meta"><img data-v-f6632f66="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik00LjIzNCA2LjY5M3Y3LjI0M0gyLjg4MWMtLjQ4NiAwLS44ODEtLjQ5Mi0uODgxLTEuMDk1VjcuODc1YzAtLjYzLjQxMi0xLjE4Mi44OC0xLjE4MmgxLjM1NHptMy42ODgtMy43QzguMDEgMi40MDQgOC40OSAxLjk5IDkuMDE4IDJjLjc1NC4wMTUgMS4yMDQuNjYzIDEuMzYuOTgzLjI4NC41ODUuMjkyIDEuNTQ5LjA5NyAyLjE2Ny0uMTc3LjU2LS41ODYgMS4yOTYtLjU4NiAxLjI5NmgzLjA2NmMuMzI0IDAgLjYyNS4xNjQuODI2LjQ0OS4yMDQuMjkuMjcuNjY4LjE3OCAxLjAxMWwtMS4zODcgNS4xODNjLS4xMjYuNDk5LS41NDQuODQ3LTEuMDE2Ljg0N0g1LjUzVjYuNjkzYzEuMzg1LS4zMDkgMi4yMzYtMi42MzIgMi4zOTItMy43eiIvPgogICAgPC9nPgo8L3N2Zz4K" class="icon"><span data-v-f6632f66="" class="count">28</span></div><div data-v-f6632f66="" class="entry-meta"><img data-v-f6632f66="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik0yIDR2OC4wMzhoNC40NDRMMTEuMTExIDE1di0yLjk2MkgxNFY0eiIvPgogICAgPC9nPgo8L3N2Zz4K" class="icon"><span data-v-f6632f66="" class="count">2</span></div></div></a><a data-v-f6632f66="" href="/post/5bc7067c6fb9a05d1117b2ef" target="_blank" rel="" st:name="link" class="item" data-v-70a2cd6d=""><div data-v-f6632f66="" class="entry-title">æ˜é‡‘ç›´æ’­ ç¬¬åä¸€æœŸå°ç¨‹åºä¸“åœº  æ‰“ç æŒ‡å—ï¼šç”±çŒ«çœ¼çº¿ä¸‹æ‰«ç 1åˆ†è´­è°ˆèµ·</div><div data-v-f6632f66="" class="entry-meta-box"><div data-v-f6632f66="" class="entry-meta"><img data-v-f6632f66="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik00LjIzNCA2LjY5M3Y3LjI0M0gyLjg4MWMtLjQ4NiAwLS44ODEtLjQ5Mi0uODgxLTEuMDk1VjcuODc1YzAtLjYzLjQxMi0xLjE4Mi44OC0xLjE4MmgxLjM1NHptMy42ODgtMy43QzguMDEgMi40MDQgOC40OSAxLjk5IDkuMDE4IDJjLjc1NC4wMTUgMS4yMDQuNjYzIDEuMzYuOTgzLjI4NC41ODUuMjkyIDEuNTQ5LjA5NyAyLjE2Ny0uMTc3LjU2LS41ODYgMS4yOTYtLjU4NiAxLjI5NmgzLjA2NmMuMzI0IDAgLjYyNS4xNjQuODI2LjQ0OS4yMDQuMjkuMjcuNjY4LjE3OCAxLjAxMWwtMS4zODcgNS4xODNjLS4xMjYuNDk5LS41NDQuODQ3LTEuMDE2Ljg0N0g1LjUzVjYuNjkzYzEuMzg1LS4zMDkgMi4yMzYtMi42MzIgMi4zOTItMy43eiIvPgogICAgPC9nPgo8L3N2Zz4K" class="icon"><span data-v-f6632f66="" class="count">5</span></div><div data-v-f6632f66="" class="entry-meta"><img data-v-f6632f66="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik0yIDR2OC4wMzhoNC40NDRMMTEuMTExIDE1di0yLjk2MkgxNFY0eiIvPgogICAgPC9nPgo8L3N2Zz4K" class="icon"><span data-v-f6632f66="" class="count">0</span></div></div></a><a data-v-f6632f66="" href="/post/5bcd157b6fb9a05d0b146ef7" target="_blank" rel="" st:name="link" class="item" data-v-70a2cd6d=""><div data-v-f6632f66="" class="entry-title">åˆ©ç”¨è´£ä»»é“¾æ¨¡å¼è®¾è®¡ä¸€ä¸ªæ‹¦æˆªå™¨</div><div data-v-f6632f66="" class="entry-meta-box"><div data-v-f6632f66="" class="entry-meta"><img data-v-f6632f66="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik00LjIzNCA2LjY5M3Y3LjI0M0gyLjg4MWMtLjQ4NiAwLS44ODEtLjQ5Mi0uODgxLTEuMDk1VjcuODc1YzAtLjYzLjQxMi0xLjE4Mi44OC0xLjE4MmgxLjM1NHptMy42ODgtMy43QzguMDEgMi40MDQgOC40OSAxLjk5IDkuMDE4IDJjLjc1NC4wMTUgMS4yMDQuNjYzIDEuMzYuOTgzLjI4NC41ODUuMjkyIDEuNTQ5LjA5NyAyLjE2Ny0uMTc3LjU2LS41ODYgMS4yOTYtLjU4NiAxLjI5NmgzLjA2NmMuMzI0IDAgLjYyNS4xNjQuODI2LjQ0OS4yMDQuMjkuMjcuNjY4LjE3OCAxLjAxMWwtMS4zODcgNS4xODNjLS4xMjYuNDk5LS41NDQuODQ3LTEuMDE2Ljg0N0g1LjUzVjYuNjkzYzEuMzg1LS4zMDkgMi4yMzYtMi42MzIgMi4zOTItMy43eiIvPgogICAgPC9nPgo8L3N2Zz4K" class="icon"><span data-v-f6632f66="" class="count">19</span></div><div data-v-f6632f66="" class="entry-meta"><img data-v-f6632f66="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik0yIDR2OC4wMzhoNC40NDRMMTEuMTExIDE1di0yLjk2MkgxNFY0eiIvPgogICAgPC9nPgo8L3N2Zz4K" class="icon"><span data-v-f6632f66="" class="count">2</span></div></div></a><a data-v-f6632f66="" href="/post/5bcd2022f265da0abe273330" target="_blank" rel="" st:name="link" class="item" data-v-70a2cd6d=""><div data-v-f6632f66="" class="entry-title">Goè¯­è¨€æ€§èƒ½ä¼˜åŒ–- For Range æ€§èƒ½ç ”ç©¶</div><div data-v-f6632f66="" class="entry-meta-box"><div data-v-f6632f66="" class="entry-meta"><img data-v-f6632f66="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik00LjIzNCA2LjY5M3Y3LjI0M0gyLjg4MWMtLjQ4NiAwLS44ODEtLjQ5Mi0uODgxLTEuMDk1VjcuODc1YzAtLjYzLjQxMi0xLjE4Mi44OC0xLjE4MmgxLjM1NHptMy42ODgtMy43QzguMDEgMi40MDQgOC40OSAxLjk5IDkuMDE4IDJjLjc1NC4wMTUgMS4yMDQuNjYzIDEuMzYuOTgzLjI4NC41ODUuMjkyIDEuNTQ5LjA5NyAyLjE2Ny0uMTc3LjU2LS41ODYgMS4yOTYtLjU4NiAxLjI5NmgzLjA2NmMuMzI0IDAgLjYyNS4xNjQuODI2LjQ0OS4yMDQuMjkuMjcuNjY4LjE3OCAxLjAxMWwtMS4zODcgNS4xODNjLS4xMjYuNDk5LS41NDQuODQ3LTEuMDE2Ljg0N0g1LjUzVjYuNjkzYzEuMzg1LS4zMDkgMi4yMzYtMi42MzIgMi4zOTItMy43eiIvPgogICAgPC9nPgo8L3N2Zz4K" class="icon"><span data-v-f6632f66="" class="count">8</span></div><div data-v-f6632f66="" class="entry-meta"><img data-v-f6632f66="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik0yIDR2OC4wMzhoNC40NDRMMTEuMTExIDE1di0yLjk2MkgxNFY0eiIvPgogICAgPC9nPgo8L3N2Zz4K" class="icon"><span data-v-f6632f66="" class="count">0</span></div></div></a></div></div></div></div></div><div data-v-2febaf4d="" data-v-41d33d72="" class="article-suspended-panel article-suspended-panel" data-v-3f216172=""><div data-v-2febaf4d="" badge="23" class="like-btn panel-btn like-adjust with-badge"></div><div data-v-2febaf4d="" badge="0" class="comment-btn panel-btn comment-adjust"></div><div data-v-2febaf4d="" class="collect-btn panel-btn"><!----></div><div data-v-2febaf4d="" class="share-title">åˆ†äº«</div><div data-v-2febaf4d="" class="weibo-btn share-btn panel-btn"></div><div data-v-2febaf4d="" class="qq-btn share-btn panel-btn"></div><div data-v-2febaf4d="" class="wechat-btn share-btn panel-btn"><img data-v-2febaf4d="" src="" class="wechat-qr-code-img shadow" style="display: none;"></div></div><div data-v-f0e3c22e="" data-v-41d33d72="" class="image-viewer-box" data-v-3f216172=""><!----></div><div data-v-00a4671b="" data-v-41d33d72="" st:block="mobileBottomBar" class="mobile-bottom-bar" data-v-3f216172=""><div data-v-00a4671b="" class="bar-container"><a data-v-00a4671b="" href="https://juejin.im/about" class="left"><img data-v-00a4671b="" src="https://b-gold-cdn.xitu.io/images/logo-bold.svg"><span data-v-00a4671b="">ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</span></a><a data-v-00a4671b="" st:name="openInAppBtn" class="button">æ‰“å¼€åº”ç”¨<div data-v-00a4671b="" class="pop-up" style="display: none;"><a data-v-00a4671b="" class="pop-up-content"></a></div></a></div></div></main></div><div data-v-19078e6d="" data-v-6ede48a3="" class="recommend-box"><div data-v-19078e6d="" class="extension"><div data-v-19078e6d="" data-growing-container="true" data-growing-title="æ˜é‡‘æ’ä»¶" class="link"><div data-v-19078e6d="" class="title">æ˜é‡‘æµè§ˆå™¨æ’ä»¶ - ä¸‹è½½æ’ä»¶ï¼Œé€ä½ <span data-v-19078e6d="" class="price">45å…ƒ</span>ä¹°å°å†Œ</div></div><div data-v-19078e6d="" class="ion-close"></div></div><!----></div></div>
      
      <script type="text/javascript" src="https://b-gold-cdn.xitu.io/v3/static/js/manifest.20254fa563d3539b68bf.js"></script><script type="text/javascript" src="https://b-gold-cdn.xitu.io/v3/static/js/vendor.e6fd81aa1499049a5bee.js"></script><script type="text/javascript" src="https://b-gold-cdn.xitu.io/v3/static/js/app.a99a1e8180beec940a3f.js"></script>
    </body></html>